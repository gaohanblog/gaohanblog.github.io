<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">




  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link rel="stylesheet" href="/lib/pace/pace-theme-center-simple.min.css?v=1.0.2">



















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/ffavicon32.ico?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon32.ico?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":15,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    }
  };
</script>



  <meta name="description" content="gratitude and love">
<meta property="og:type" content="website">
<meta property="og:title" content="To be or not to be?">
<meta property="og:url" content="http://yoursite.com/page/20/index.html">
<meta property="og:site_name" content="To be or not to be?">
<meta property="og:description" content="gratitude and love">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="To be or not to be?">
<meta name="twitter:description" content="gratitude and love">



  <link rel="alternate" href="/atom.xml" title="To be or not to be?" type="application/atom+xml">



  
  
  <link rel="canonical" href="http://yoursite.com/page/20/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>To be or not to be?</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">To be or not to be?</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">åˆ·é¢˜å­¦ä¹ ç¬”è®°</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>é¦–é¡µ</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>å½’æ¡£</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>about me</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>æ ‡ç­¾</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>åˆ†ç±»</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



</div>
    </header>

    
  
  

  

  <a href="https://github.com/gaohanblog/gaohanblog.github.io" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/14/01-çº¿ç¨‹åŸºæœ¬çŸ¥è¯†/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/10/14/01-çº¿ç¨‹åŸºæœ¬çŸ¥è¯†/" class="post-title-link" itemprop="url">01-çº¿ç¨‹åŸºæœ¬çŸ¥è¯†</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-14 22:07:48" itemprop="dateCreated datePublished" datetime="2019-10-14T22:07:48+08:00">2019-10-14</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a></span>

                
                
                  ï¼Œ
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/java/å¤šçº¿ç¨‹/" itemprop="url" rel="index"><span itemprop="name">å¤šçº¿ç¨‹</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">3.7k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">3 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="start-å’Œrun-æ–¹æ³•çš„åŒºåˆ«"><a href="#start-å’Œrun-æ–¹æ³•çš„åŒºåˆ«" class="headerlink" title="start()å’Œrun()æ–¹æ³•çš„åŒºåˆ«"></a><font color="#8B475D">start()å’Œrun()æ–¹æ³•çš„åŒºåˆ«</font></h2><p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªå°æ —å­ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/thread/thread1-1.png" alt="image"></p>
<p>ä»ä¸»å‡½æ•°ä¸­åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸”ä»¥<code>t.run()</code>çš„æ–¹å¼è°ƒç”¨ï¼Œä»è¾“å‡ºç»“æœå¯ä»¥çœ‹å‡ºï¼Œjavaæ˜¯é»˜è®¤å¼€å¯ä¸»çº¿ç¨‹æ¥æ‰§è¡Œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬ç”¨t.run()å»æ‰§è¡Œçš„æ—¶å€™ï¼Œåªæ˜¯ç›¸å½“äºç®€å•çš„å‡½æ•°è°ƒç”¨ï¼Œå› ä¸ºä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºéƒ½æ˜¯mainè¿›ç¨‹ï¼Œé‚£ä¹ˆï¼Œå®è´¨ä¸Šå¹¶æ²¡æœ‰æ–°å»ºä¸€ä¸ªå­çº¿ç¨‹ã€‚</p>
<p>å‡å¦‚ç”¨<code>t.start()</code>æ¥è°ƒç”¨é‚£ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/thread/thread1-2.png" alt="image"></p>
<p>é‚£ä¹ˆï¼Œä»è¡¨è±¡ä¸Šæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œ<code>run</code>åªæ˜¯ç®€å•çš„å‡½æ•°è°ƒç”¨ï¼Œ<code>start</code>æ‰ä¼šçœŸæ­£åœ°å¼€å¯ä¸€ä¸ªæ–°çº¿ç¨‹æ¥æ‰§è¡Œï¼Œä¸‹é¢æ¥çœ‹çœ‹<code>start()</code>çš„åŸºæœ¬å®ç°æ–¹å¼ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/thread/thread1-3.png" alt="image"></p>
<p>å¯ä»¥çœ‹åˆ°<code>start</code>æ–¹æ³•é‡Œé¢è°ƒç”¨äº†<code>start0</code>æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">native</span> <span class="keyword">void</span> <span class="title">start0</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>è€Œ<code>start0</code>æ–¹æ³•æ˜¯ä¸€ä¸ª<code>native</code>æ–¹æ³•,IDEAå·²ç»çœ‹ä¸äº†äº†ï¼Œæˆ‘ä»¬å»<code>openJDK</code>çœ‹çœ‹:</p>
<p>æ‰¾åˆ° <a href="http://hg.openjdk.java.net/jdk8u/jdk8u/jdk/file/f0b93fbd8cf8/src/share/native/java/lang/Thread.c" target="_blank" rel="noopener">Thread.c</a>çš„æºç ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/thread/thread1-4.png" alt="image"></p>
<p>æ‰¾åˆ°äº†<code>JVM_StartThread</code>æ–¹æ³•ï¼Œä½†æ˜¯ä»–æ”¾åœ¨ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œæ²¡æœ‰æ‰¾åˆ°ä»–çš„å®ç°ï¼Œæ‰€ä»¥åº”è¯¥åœ¨å¼•å…¥çš„<code>jvm.h</code>åº“é‡Œé¢ï¼Œæ‰¾æ‰“ <a href="http://hg.openjdk.java.net/jdk8u/jdk8u/hotspot/file/76a9c9cf14f1/src/share/vm/prims/jvm.cpp" target="_blank" rel="noopener">jvm.cpp</a>:</p>
<p><img src="http://blog-picture-g.test.upcdn.net/thread/thread1-5.jpg" alt="image"></p>
<p>ğŸ˜¤ğŸ˜¤ğŸ˜¤ğŸ˜¤enmmmï¼Œè™½ç„¶çœ‹ä¸å¤§æ‡‚ä½†æ˜¯æˆ‘ä»¬ç¡®å®çœ‹åˆ°start()æ–¹æ³•ä¼šè°ƒç”¨è™šæ‹Ÿæœºå»åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œç„¶å¹´å†å»è°ƒç”¨<code>run()</code>æ–¹æ³•å»æ‰§è¡Œã€‚æ‰€ä»¥æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/thread/thread1-6.png" alt="image"></p>
<p>æœ€ç»ˆæ€»ç»“ï¼š</p>
<ul>
<li>è°ƒç”¨<code>start()</code>æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­çº¿ç¨‹å¹¶å¯åŠ¨</li>
<li><code>run()</code>æ–¹æ³•åªæ˜¯<code>thread</code>çš„ä¸€ä¸ªæ™®é€šæ–¹æ³•çš„è°ƒç”¨</li>
</ul>
<p>ä»¥ä¸Šåˆ†æå‚è€ƒè‡ªï¼š <a href="https://blog.csdn.net/qq_18657175/article/details/89735886" target="_blank" rel="noopener">æºç å±‚é¢è§£æThreadä¸­run()å’Œstart()çš„åŒºåˆ«ï¼Ÿ</a></p>
<h2 id="Threadå’ŒRunnableæ˜¯ä»€ä¹ˆå…³ç³»"><a href="#Threadå’ŒRunnableæ˜¯ä»€ä¹ˆå…³ç³»" class="headerlink" title="Threadå’ŒRunnableæ˜¯ä»€ä¹ˆå…³ç³»"></a><font color="#8B475D">Threadå’ŒRunnableæ˜¯ä»€ä¹ˆå…³ç³»</font></h2><p>æˆ‘ä»¬å…ˆçœ‹çœ‹<code>Thread</code>è¿™ä¸ªç±»ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/thread/thread1-7.png" alt="image"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>Thread</code>æ˜¯ä¸€ä¸ª<code>class</code>ï¼Œè€Œ<code>Runnable</code>æ˜¯ä¸€ä¸ª<code>interface</code>ï¼Œè€Œ<code>Runnable</code>ä¸­åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•å°±æ˜¯<code>run()</code>ã€‚</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬ä¸Šé¢è¯´åˆ°ï¼Œæ–°å»ºä¸€ä¸ªçº¿ç¨‹æ˜¯è¦é <code>start()</code>æ¥å®ç°çš„ï¼Œé‚£ä¹ˆ<code>Runnable</code>æ˜¯å¦‚ä½•æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹å‘¢ï¼Ÿå®ƒä¸æ˜¯åªæœ‰ä¸€ä¸ª<code>run()</code>æ–¹æ³•å—ï¼Ÿ</p>
<p>æ­¤æ—¶å†æ¥çœ‹<code>Thread</code>ç±»ï¼Œå®ƒé‡Œé¢æœ‰å¤§é‡çš„æ–¹æ³•ï¼Œå°±åŒ…å«äº†<code>run()</code>å’Œ<code>start()</code>æ–¹æ³•ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„æ„é€ å‡½æ•°ä¸º:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Thread</span><span class="params">(Runnable target)</span> </span>&#123;...&#125;</span><br></pre></td></tr></table></figure>

<p>å°±æ˜¯è¯´ï¼Œä¼ å…¥<code>Runable</code>æ¥å£çš„å®ä¾‹ã€‚åœ¨è°ƒç”¨<code>Thread</code>çš„<code>start()</code>æ–¹æ³•åˆ›å»ºå­çº¿ç¨‹,å†æ¥è°ƒç”¨é‡å†™<code>run()</code>æ–¹æ³•å°±å¯ä»¥äº†ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸ªæ —å­ã€‚</p>
<p>å…ˆè¯´è¯´ç”¨<code>Thread</code>çš„æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyThread</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">"current Thread "</span> + name + <span class="string">" is running "</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyThread t1 = <span class="keyword">new</span> MyThread(<span class="string">"thread01"</span>);</span><br><span class="line">        MyThread t2 = <span class="keyword">new</span> MyThread(<span class="string">"thread02"</span>);</span><br><span class="line">        MyThread t3 = <span class="keyword">new</span> MyThread(<span class="string">"thread03"</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">current Thread thread02 is running <span class="number">0</span></span><br><span class="line">current Thread thread02 is running <span class="number">1</span></span><br><span class="line">current Thread thread01 is running <span class="number">0</span></span><br><span class="line">current Thread thread02 is running <span class="number">2</span></span><br><span class="line">current Thread thread02 is running <span class="number">3</span></span><br><span class="line">current Thread thread02 is running <span class="number">4</span></span><br><span class="line">current Thread thread03 is running <span class="number">0</span></span><br><span class="line">current Thread thread01 is running <span class="number">1</span></span><br><span class="line">current Thread thread03 is running <span class="number">1</span></span><br><span class="line">current Thread thread01 is running <span class="number">2</span></span><br><span class="line">current Thread thread03 is running <span class="number">2</span></span><br><span class="line">current Thread thread01 is running <span class="number">3</span></span><br><span class="line">current Thread thread03 is running <span class="number">3</span></span><br><span class="line">current Thread thread01 is running <span class="number">4</span></span><br><span class="line">current Thread thread03 is running <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºæ¯ä¸ªçº¿ç¨‹æ˜¯äº¤æ›¿è¿›è¡Œçš„ï¼Œä½†æ˜¯ä»–ä»¬å±äºåŒä¸€ä¸ªè¿›ç¨‹ï¼Œå…±äº«åŒä¸€ä¸ªåœ°å€å’Œèµ„æºï¼Œæ‰€ä»¥ä¸éœ€è¦åˆ‡æ¢ï¼Œæå¤§çš„æé«˜äº†CPUçš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>ä¸‹é¢å†æ¥çœ‹çœ‹<code>Runnable</code>æ¥å£æ˜¯æ€ä¹ˆå®ç°å¤šçº¿ç¨‹çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRunable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyRunable</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">"current Thread "</span> + name + <span class="string">" is running "</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyRunable r1 = <span class="keyword">new</span> MyRunable(<span class="string">"runable1"</span>);</span><br><span class="line">        MyRunable r2 = <span class="keyword">new</span> MyRunable(<span class="string">"runable2"</span>);</span><br><span class="line">        MyRunable r3 = <span class="keyword">new</span> MyRunable(<span class="string">"runable3"</span>);</span><br><span class="line"></span><br><span class="line">        Thread t1 = <span class="keyword">new</span> Thread(r1);</span><br><span class="line">        Thread t2 = <span class="keyword">new</span> Thread(r2);</span><br><span class="line">        Thread t3 = <span class="keyword">new</span> Thread(r3);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">current Thread runable1 is running <span class="number">0</span></span><br><span class="line">current Thread runable2 is running <span class="number">0</span></span><br><span class="line">current Thread runable2 is running <span class="number">1</span></span><br><span class="line">current Thread runable2 is running <span class="number">2</span></span><br><span class="line">current Thread runable2 is running <span class="number">3</span></span><br><span class="line">current Thread runable2 is running <span class="number">4</span></span><br><span class="line">current Thread runable3 is running <span class="number">0</span></span><br><span class="line">current Thread runable3 is running <span class="number">1</span></span><br><span class="line">current Thread runable3 is running <span class="number">2</span></span><br><span class="line">current Thread runable3 is running <span class="number">3</span></span><br><span class="line">current Thread runable3 is running <span class="number">4</span></span><br><span class="line">current Thread runable1 is running <span class="number">1</span></span><br><span class="line">current Thread runable1 is running <span class="number">2</span></span><br><span class="line">current Thread runable1 is running <span class="number">3</span></span><br><span class="line">current Thread runable1 is running <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ä¸€ä¸‹ä»–ä»¬ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è°ƒç”¨<code>start()</code>æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å­çº¿ç¨‹å¹¶å¯åŠ¨ï¼Œ<code>run()</code>æ–¹æ³•æ˜¯å½“å‰çº¿ç¨‹ä¸€ä¸ªæ™®é€šæ–¹æ³•çš„è°ƒç”¨ã€‚</li>
<li><code>Thread</code>æ˜¯ä¸€ä¸ªç±»ï¼Œ<code>Runnable</code>æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå‰è€…å®ç°åè€…</li>
<li><code>Thread</code>æœ‰<code>start</code>æ–¹æ³•ï¼Œç»“åˆ<code>run()</code>å¯ä»¥å®ç°å¤šçº¿ç¨‹ï¼Œä½†æ˜¯<code>Runnable</code>æ²¡æœ‰<code>start()</code>æ–¹æ³•ï¼Œæ‰€ä»¥è¦é€šè¿‡<code>Thread()</code>æ¥å®ç°ï¼Œæ‰€ä»¥ï¼Œä¸¤ç§æ–¹å¼æœ€ç»ˆéƒ½æ˜¯é€šè¿‡<code>Thread</code>çš„<code>start()</code>æ¥å®ç°<code>run()</code>çš„å¤šçº¿ç¨‹ç‰¹æ€§</li>
<li>ç”±äº<code>JAVA</code>æ˜¯å•ä¸€ç»§æ‰¿çš„ï¼Œæ‰€ä»¥æ¨èå¤šä½¿ç”¨<code>Runnable</code>æ¥å£</li>
</ul>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/06/11-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-ç†”æ–­æœºåˆ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/10/06/11-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-ç†”æ–­æœºåˆ¶/" class="post-title-link" itemprop="url">11-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-ç†”æ–­æœºåˆ¶</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-06 16:54:11" itemprop="dateCreated datePublished" datetime="2019-10-06T16:54:11+08:00">2019-10-06</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/springcloud/" itemprop="url" rel="index"><span itemprop="name">springcloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">8k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">7 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨æ•´ä¸ªç³»ç»Ÿä¸­ï¼Œå‡å¦‚åŸå¸‚æ•°æ®å¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼Œé‚£ä¹ˆä¾èµ–åˆ°åŸå¸‚æ•°æ®çš„æ‰€æœ‰æœåŠ¡éƒ½å°†å—åˆ°ç‰µè¿ï¼Œæœ‰å¯èƒ½é€ æˆæ•´ä¸ªç³»ç»Ÿçš„é›ªå´©ï¼Œæˆ–è€…è¯´èµ„æºéœ€è¦èšé›†åœ¨æ ¸å¿ƒä¸šåŠ¡ä¸Šï¼Œéæ ¸å¿ƒä¸šåŠ¡å°±å¯ä»¥é€‚å½“åœ°å…³é—­ï¼Œæ­¤æ—¶å°±æ˜¯éœ€è¦æœ‰ä¸€ç§æœºåˆ¶æ¥å®ç°ç³»ç»Ÿä¿æŠ¤å’ŒæœåŠ¡é™çº§çš„åŠŸèƒ½ã€‚æœ¬ç« ä»‹ç»hystrixç»„ä»¶ã€‚</p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a><font color="#8B475D">å®šä¹‰</font></h2><p>ä¿æŠ¤ç³»ç»Ÿçš„ä¸€ç§æ–¹å¼ï¼Œå½“è¯·æ±‚è¶…å‡ºé˜ˆå€¼ï¼ŒæŠŠçœŸå®çš„æœåŠ¡æ¥å£æ–­å¼€ï¼Œå¯èƒ½åªæ˜¯è¿”å›ç»™ä½ ä¸€ä¸ªé»˜è®¤å€¼ã€‚è¿™æ ·ï¼Œææ–­äº†è‡ªå·±çš„æœåŠ¡ï¼Œåˆå¯ä»¥ç»™ç”¨æˆ·ä¸€ä¸ªå“åº”ã€‚</p>
<blockquote>
<p><font color="#333">å¯¹è¯¥æœåŠ¡çš„è°ƒç”¨æ‰§è¡Œç†”æ–­ï¼Œå¯¹äºåç»­è¯·æ±‚ï¼Œä¸å†ç»§ç»­è°ƒç”¨è¯¥ç›®æ ‡æœåŠ¡ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ï¼Œä»è€Œå¯ä»¥å¿«é€Ÿé‡Šæ”¾èµ„æºã€‚</font></p>
</blockquote>
<p>ç†”æ–­å™¨å¥½å¤„ï¼šç³»ç»Ÿç¨³å®šã€å‡å°‘æ€§èƒ½æŸè€—ã€åŠæ—¶å“åº”ã€é˜ˆå€¼å¯é…ç½®</p>
<p>ç†”æ–­å™¨æœ‰ç‚¹åƒç”Ÿæ´»ä¸­ç”µè·¯ä¸­çš„ä¿é™©ä¸ï¼Œå½“ç”µè·¯ä¸­å‡ºç°æŸäº›å¼‚å¸¸æ¯”å¦‚çŸ­è·¯æˆ–è€…ç”µæµè¿‡å¤§ä¿é™©ä¸ä¼šçƒ§æ–­æ¥ä¿æŠ¤æ•´ä¸ªç”µè·¯ï¼Œç†”æ–­å™¨æœ‰ç±»ä¼¼çš„åŸç†ï¼Œä½†åˆä¸å®Œå…¨ç›¸åŒã€‚åœ¨äº’è”ç½‘ç³»ç»Ÿä¸­ï¼Œå½“ä¸‹æ¸¸æœåŠ¡å› è®¿é—®å‹åŠ›è¿‡å¤§è€Œå“åº”å˜æ…¢æˆ–å¤±è´¥ï¼Œä¸Šæ¸¸æœåŠ¡ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿæ•´ä½“çš„å¯ç”¨æ€§ï¼Œå¯ä»¥æš‚æ—¶åˆ‡æ–­å¯¹ä¸‹æ¸¸æœåŠ¡çš„è°ƒç”¨ã€‚</p>
<p>è¿™ç§ç‰ºç‰²å±€éƒ¨ï¼Œä¿å…¨æ•´ä½“çš„æªæ–½å°±å«åšç†”æ–­ã€‚</p>
<p>å¦‚æœä¸é‡‡å–ç†”æ–­æªæ–½ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿä¼šæ€æ ·å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ —å­ã€‚å½“å‰ç³»ç»Ÿä¸­æœ‰Aï¼ŒBï¼ŒCä¸‰ä¸ªæœåŠ¡ï¼ŒæœåŠ¡Aæ˜¯ä¸Šæ¸¸ï¼ŒæœåŠ¡Bæ˜¯ä¸­æ¸¸ï¼ŒæœåŠ¡Cæ˜¯ä¸‹æ¸¸ã€‚å®ƒä»¬çš„è°ƒç”¨é“¾å¦‚ä¸‹ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-1.png" alt="image"></p>
<p>ä¸€æ—¦ä¸‹æ¸¸æœåŠ¡Cå› æŸäº›åŸå› å˜å¾—ä¸å¯ç”¨ï¼Œç§¯å‹äº†å¤§é‡è¯·æ±‚ï¼ŒæœåŠ¡Bçš„è¯·æ±‚çº¿ç¨‹ä¹Ÿéšä¹‹é˜»å¡ã€‚çº¿ç¨‹èµ„æºé€æ¸è€—å°½ï¼Œä½¿å¾—æœåŠ¡Bä¹Ÿå˜å¾—ä¸å¯ç”¨ã€‚ç´§æ¥ç€ï¼ŒæœåŠ¡Aä¹Ÿå˜ä¸ºä¸å¯ç”¨ï¼Œæ•´ä¸ªè°ƒç”¨é“¾è·¯è¢«æ‹–å®ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-2.png" alt="image"></p>
<p>åƒè¿™ç§è°ƒç”¨é“¾è·¯çš„è¿é”æ•…éšœï¼Œå«åš<strong>é›ªå´©</strong>ã€‚</p>
<p>åœ¨è¿™ç§æ—¶å€™ï¼Œå°±éœ€è¦æˆ‘ä»¬çš„ç†”æ–­æœºåˆ¶æ¥æŒ½æ•‘æ•´ä¸ªç³»ç»Ÿã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-3.png" alt="image"></p>
<p><strong>å¼€å¯ç†”æ–­</strong>:åœ¨å›ºå®šæ—¶é—´çª—å£å†…ï¼Œæ¥å£è°ƒç”¨è¶…æ—¶æ¯”ç‡è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼ï¼Œä¼šå¼€å¯ç†”æ–­ã€‚è¿›å…¥ç†”æ–­çŠ¶æ€åï¼Œåç»­å¯¹è¯¥æœåŠ¡æ¥å£çš„è°ƒç”¨ä¸å†ç»è¿‡ç½‘ç»œï¼Œç›´æ¥æ‰§è¡Œæœ¬åœ°çš„é»˜è®¤æ–¹æ³•ï¼Œè¾¾åˆ°æœåŠ¡é™çº§çš„æ•ˆæœã€‚</p>
<p><strong>ç†”æ–­æ¢å¤</strong>:ç†”æ–­ä¸å¯èƒ½æ˜¯æ°¸ä¹…çš„ã€‚å½“ç»è¿‡äº†è§„å®šæ—¶é—´ä¹‹åï¼ŒæœåŠ¡å°†ä»ç†”æ–­çŠ¶æ€å›å¤è¿‡æ¥ï¼Œå†æ¬¡æ¥å—è°ƒç”¨æ–¹çš„è¿œç¨‹è°ƒç”¨ã€‚</p>
<h2 id="ç†”æ–­å’Œé™çº§"><a href="#ç†”æ–­å’Œé™çº§" class="headerlink" title="ç†”æ–­å’Œé™çº§"></a><font color="#8B475D">ç†”æ–­å’Œé™çº§</font></h2><p><strong>ç†”æ–­</strong>ï¼šä¸¾ä¸ªä¾‹å­è§£é‡Šï¼Œç”Ÿæ´»ä¸­æ¯å®¶æ¯æˆ·éƒ½åœ¨ç”¨ç”µï¼Œå°æ˜å®¶çš„ç”µçº¿å› ä¸ºæ•…éšœå¯¼è‡´äº†å°æ˜å®¶åœç”µäº†ã€‚è€Œå°æã€å°å¼ å®¶çš„ç”µæ˜¯æ­£å¸¸ä½¿ç”¨çš„ã€‚ç”µåŠ›å…¬å¸æ²¡æœ‰å› ä¸ºå°æ˜å®¶æœ‰æ•…éšœçº¿è·¯è€Œåœæ‰å…¶ä»–äººå®¶çš„ç”µï¼ŒåŒæ—¶å°æ˜å®¶æ²¡æœ‰ä½¿ç”¨æœ‰æ•…éšœçš„ç”µè·¯çš„ç”µã€‚è¿™æ—¶å³ä¸ºç†”æ–­ã€‚ç†”æ–­çš„ç›®çš„æ˜¯å½“AæœåŠ¡æ¨¡å—ä¸­çš„æŸå—ç¨‹åºå‡ºç°æ•…éšœåä¸ºäº†ä¸å½±å“å…¶ä»–å®¢æˆ·ç«¯çš„è¯·æ±‚è€Œåšå‡ºçš„åŠæ—¶å›åº”ã€‚</p>
<p><strong>é™çº§</strong>ï¼šä¸¾ä¸ªä¾‹å­è§£é‡Šï¼Œæˆ‘ä»¬å»é“¶è¡Œæ’é˜ŸåŠç†ä¸šåŠ¡ï¼Œå¤§éƒ¨åˆ†çš„é“¶è¡Œåˆ†ä¸ºæ™®é€šçª—å£ã€ç‰¹æ®Šçª—å£ï¼ˆVIPçª—å£ï¼Œè€å¹´çª—å£ï¼‰ã€‚æŸä¸€å¤©é“¶è¡Œå¤§å…æ’æ™®é€šçª—å£çš„äººå·¨å¤šã€‚è¿™æ—¶ç‰¹æ®Šçª—å£è´´å‡ºå‘Šç¤ºè¯´æŸæ—¶åˆ»ä¹‹åå†å¼€æ”¾ã€‚é‚£ä¹ˆè¿™æ—¶ç‰¹æ®Šçª—å£çš„å·¥ä½œäººå‘˜å°±å¯ä»¥ç©ºå‡ºæ¥å»å¸®å…¶ä»–çª—å£åŠç†ä¸šåŠ¡ï¼Œæé«˜åŠäº‹æ•ˆç‡ï¼Œå·²è¾¾åˆ°è§£å†³æ™®é€šçª—å£æ’é˜Ÿçš„äººè¿‡çš„ç›®çš„ã€‚è¿™æ—¶å³ä¸ºé™çº§ï¼Œé™çº§çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³æ•´ä½“é¡¹ç›®çš„å‹åŠ›ï¼Œè€Œç‰ºç‰²æ‰æŸä¸€æœåŠ¡æ¨¡å—è€Œé‡‡å–çš„æªæ–½ã€‚</p>
<p>æ‰€ä»¥ä»ä¸Šè¿°åˆ†ææ¥çœ‹ï¼Œä¸¤è€…å…¶å®ä»æœ‰äº›è§’åº¦çœ‹æ˜¯æœ‰ä¸€å®šçš„ç±»ä¼¼æ€§çš„ï¼š</p>
<ul>
<li><strong>ç›®çš„å¾ˆä¸€è‡´</strong>ï¼Œéƒ½æ˜¯ä»å¯ç”¨æ€§å¯é æ€§ç€æƒ³ï¼Œä¸ºé˜²æ­¢ç³»ç»Ÿçš„æ•´ä½“ç¼“æ…¢ç”šè‡³å´©æºƒï¼Œé‡‡ç”¨çš„æŠ€æœ¯æ‰‹æ®µï¼›</li>
<li><strong>æœ€ç»ˆè¡¨ç°ç±»ä¼¼</strong>ï¼Œå¯¹äºä¸¤è€…æ¥è¯´ï¼Œæœ€ç»ˆè®©ç”¨æˆ·ä½“éªŒåˆ°çš„æ˜¯æŸäº›åŠŸèƒ½æš‚æ—¶ä¸å¯è¾¾æˆ–ä¸å¯ç”¨ï¼›</li>
<li><strong>ç²’åº¦ä¸€èˆ¬éƒ½æ˜¯æœåŠ¡çº§åˆ«</strong>ï¼Œå½“ç„¶ï¼Œä¸šç•Œä¹Ÿæœ‰ä¸å°‘æ›´ç»†ç²’åº¦çš„åšæ³•ï¼Œæ¯”å¦‚åšåˆ°æ•°æ®æŒä¹…å±‚ï¼ˆå…è®¸æŸ¥è¯¢ï¼Œä¸å…è®¸å¢åˆ æ”¹ï¼‰ï¼›</li>
<li><strong>è‡ªæ²»æ€§è¦æ±‚å¾ˆé«˜</strong>ï¼Œç†”æ–­æ¨¡å¼ä¸€èˆ¬éƒ½æ˜¯æœåŠ¡åŸºäºç­–ç•¥çš„è‡ªåŠ¨è§¦å‘ï¼Œé™çº§è™½è¯´å¯äººå·¥å¹²é¢„ï¼Œä½†åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œå®Œå…¨é äººæ˜¾ç„¶ä¸å¯èƒ½ï¼Œå¼€å…³é¢„ç½®ã€é…ç½®ä¸­å¿ƒéƒ½æ˜¯å¿…è¦æ‰‹æ®µï¼›</li>
</ul>
<p>è€Œä¸¤è€…çš„åŒºåˆ«ä¹Ÿæ˜¯æ˜æ˜¾çš„ï¼š</p>
<ul>
<li><strong>è§¦å‘åŸå› ä¸å¤ªä¸€æ ·</strong>ï¼ŒæœåŠ¡ç†”æ–­ä¸€èˆ¬æ˜¯æŸä¸ªæœåŠ¡ï¼ˆä¸‹æ¸¸æœåŠ¡ï¼‰æ•…éšœå¼•èµ·ï¼Œè€ŒæœåŠ¡é™çº§ä¸€èˆ¬æ˜¯ä»æ•´ä½“è´Ÿè·è€ƒè™‘ï¼›</li>
<li><strong>ç®¡ç†ç›®æ ‡çš„å±‚æ¬¡ä¸å¤ªä¸€æ ·</strong>ï¼Œç†”æ–­å…¶å®æ˜¯ä¸€ä¸ªæ¡†æ¶çº§çš„å¤„ç†ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ï¼ˆæ— å±‚çº§ä¹‹åˆ†ï¼‰ï¼Œè€Œé™çº§ä¸€èˆ¬éœ€è¦å¯¹ä¸šåŠ¡æœ‰å±‚çº§ä¹‹åˆ†ï¼ˆæ¯”å¦‚é™çº§ä¸€èˆ¬æ˜¯ä»æœ€å¤–å›´æœåŠ¡å¼€å§‹ï¼‰</li>
</ul>
<h2 id="Spring-Cloud-Hystrix"><a href="#Spring-Cloud-Hystrix" class="headerlink" title="Spring Cloud Hystrix"></a><font color="#8B475D">Spring Cloud Hystrix</font></h2><p>Spring Cloud Hystrixæ˜¯åŸºäºNetflixçš„å¼€æºæ¡†æ¶Hystrixå®ç°ï¼Œè¯¥æ¡†æ¶å®ç°äº†æœåŠ¡ç†”æ–­ã€çº¿ç¨‹éš”ç¦»ç­‰ä¸€ç³»åˆ—æœåŠ¡ä¿æŠ¤åŠŸèƒ½ã€‚å¯¹äºç†”æ–­æœºåˆ¶çš„å®ç°ï¼ŒHystrixè®¾è®¡äº†ä¸‰ç§çŠ¶æ€ï¼š</p>
<ul>
<li><strong>ç†”æ–­å…³é—­çŠ¶æ€ï¼ˆClosedï¼‰</strong>ï¼šæœåŠ¡æ²¡æœ‰æ•…éšœæ—¶ï¼Œç†”æ–­å™¨æ‰€å¤„çš„çŠ¶æ€ï¼Œå¯¹è°ƒç”¨æ–¹çš„è°ƒç”¨ä¸åšä»»ä½•é™åˆ¶ã€‚</li>
<li><strong>ç†”æ–­å¼€å¯çŠ¶æ€ï¼ˆOpenï¼‰</strong>ï¼šåœ¨å›ºå®šæ—¶é—´çª—å£å†…ï¼ˆ<code>Hystrix</code>é»˜è®¤æ˜¯10ç§’ï¼‰ï¼Œæ¥å£è°ƒç”¨å‡ºé”™æ¯”ç‡è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼ï¼ˆ<code>Hystrix</code>é»˜è®¤ä¸º50%ï¼‰ï¼Œä¼šè¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ã€‚è¿›å…¥ç†”æ–­çŠ¶æ€åï¼Œåç»­å¯¹è¯¥æœåŠ¡æ¥å£çš„è°ƒç”¨ä¸å†ç»è¿‡ç½‘ç»œï¼Œç›´æ¥æ‰§è¡Œæœ¬åœ°çš„<code>fallback</code>æ–¹æ³•ã€‚</li>
<li><strong>åŠç†”æ–­çŠ¶æ€ï¼ˆHalf-Openï¼‰</strong>ï¼šåœ¨è¿›å…¥ç†”æ–­å¼€å¯çŠ¶æ€ä¸€æ®µæ—¶é—´ä¹‹åï¼ˆHystrixé»˜è®¤æ˜¯5ç§’ï¼‰ï¼Œç†”æ–­å™¨ä¼šè¿›å…¥åŠç†”æ–­çŠ¶æ€ã€‚æ‰€è°“åŠç†”æ–­å°±æ˜¯å°è¯•æ¢å¤æœåŠ¡è°ƒç”¨ï¼Œå…è®¸æœ‰é™çš„æµé‡è°ƒç”¨è¯¥æœåŠ¡ï¼Œå¹¶ç›‘æ§è°ƒç”¨æˆåŠŸç‡ã€‚å¦‚æœæˆåŠŸç‡è¾¾åˆ°é¢„æœŸï¼Œåˆ™è¯´æ˜æœåŠ¡å·²æ¢å¤ï¼Œè¿›å…¥ç†”æ–­å…³é—­çŠ¶æ€ï¼›å¦‚æœæˆåŠŸç‡ä»æ—§å¾ˆä½ï¼Œåˆ™é‡æ–°è¿›å…¥ç†”æ–­å…³é—­çŠ¶æ€ã€‚</li>
</ul>
<p>é›†æˆ<code>Hystrix</code>ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼š</p>
<p>å°†<code>msa-weather-eureka-client-feign</code>æœåŠ¡æ”¹é€ ä¸º<code>msa-weather-eureka-client-feign-hystrix</code></p>
<p>1ä¸¶å¼•å…¥ä¾èµ–ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--Hystrix--&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-cloud-starter-netflix-hystrix&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>2ä¸¶æ·»åŠ æ³¨è§£<code>@EnableCircuitBreaker</code>ï¼Œå¯ç”¨<code>Hystrix</code>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="meta">@EnableCircuitBreaker</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MicroWeatherEurekaClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MicroWeatherEurekaClientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ä¸¶åœ¨controlleræ–¹æ³•ä¸Šå¢åŠ æ³¨è§£@HystrixCommand:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CityController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CityClient cityClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/cities"</span>)</span><br><span class="line">    <span class="meta">@HystrixCommand</span>(fallbackMethod=<span class="string">"defaultCities"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">listCity</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//é€šè¿‡feignå®¢æˆ·ç«¯æ¥æŸ¥æ‰¾çš„</span></span><br><span class="line">        String body = cityClient.listCity();</span><br><span class="line">        <span class="keyword">return</span> body;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String  <span class="title">defaultCities</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"æœ¬æœåŠ¡ç°åœ¨ä¸å¯ç”¨ï¼"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ä¸¶æµ‹è¯•</p>
<p>å¯åŠ¨<code>eureka server</code>ç«¯å’ŒåŸå¸‚æ•°æ®æœåŠ¡ï¼Œå†å¯åŠ¨æœ¬æœåŠ¡ï¼Œæ˜¯æ­£å¸¸çš„ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-5.png" alt="image"></p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å°†åŸå¸‚æ•°æ®æœåŠ¡å…³é—­ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰è¿”å›æˆ‘ä»¬æŒ‡å®šçš„é»˜è®¤å€¼ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-6.png" alt="image"></p>
<h2 id="æ”¹é€ æœ¬ç³»ç»Ÿ"><a href="#æ”¹é€ æœ¬ç³»ç»Ÿ" class="headerlink" title="æ”¹é€ æœ¬ç³»ç»Ÿ"></a><font color="#8B475D">æ”¹é€ æœ¬ç³»ç»Ÿ</font></h2><p>ç°åœ¨æˆ‘ä»¬è¦æ”¹é€ <code>msa-weather-report-eureka-feign-gateway</code>ï¼Œå°†å…¶æ”¹é€ ä¸º<code>msa-weather-report-eureka-feign-gateway-hystrix</code>ï¼Œæˆ‘ä»¬ç”¨æ–°çš„æ–¹å¼ï¼Œç›´æ¥åœ¨<code>DataClient</code>è¿™ä¸ªæ¥å£é‡Œé¢å£°æ˜è§¦å‘ç†”æ–­æ—¶å›è°ƒçš„ç±»<code>DataClientFallback.class</code>ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(name=<span class="string">"msa-weather-eureka-client-zuul"</span>,fallback = DataClientFallback.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DataClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–åŸå¸‚åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/city/cities"</span>)</span><br><span class="line">    <span class="function">List&lt;City&gt;  <span class="title">listCity</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®åŸå¸‚Idæ¥æŸ¥è¯¢å¤©æ°”æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cityId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/data/weather/cityId/&#123;cityId&#125;"</span>)</span><br><span class="line">    <span class="function">WeatherResponse <span class="title">getDataByCityId</span><span class="params">(@PathVariable(<span class="string">"cityId"</span>)</span> String cityId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…·ä½“è¿™ä¸ªå›è°ƒçš„ç±»é‡Œé¢æ—¶è¿™æ ·å†™çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DataClientFallback</span> <span class="keyword">implements</span> <span class="title">DataClient</span></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å½“è§¦å‘æ–­è·¯å™¨çš„æ—¶å€™é»˜è®¤è¿”å›éƒ‘å·å’Œæ–°éƒ‘ä¸¤ä¸ªåŸå¸‚çš„æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;City&gt; <span class="title">listCity</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        List&lt;City&gt; cityList = <span class="keyword">null</span>;</span><br><span class="line">        cityList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        City city = <span class="keyword">new</span> City();</span><br><span class="line">        city.setCityId(<span class="string">"101180101"</span>);</span><br><span class="line">        city.setCityName(<span class="string">"éƒ‘å·"</span>);</span><br><span class="line">        cityList.add(city);</span><br><span class="line"></span><br><span class="line">        city = <span class="keyword">new</span> City();</span><br><span class="line">        city.setCityId(<span class="string">"101180106"</span>);</span><br><span class="line">        city.setCityName(<span class="string">"æ–°éƒ‘"</span>);</span><br><span class="line">        cityList.add(city);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cityList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¦‚æœå¤©æ°”é‡‡é›†æ•°æ®æŒ‚æ‰äº†è¿”å›ç©º</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cityId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WeatherResponse <span class="title">getDataByCityId</span><span class="params">(String cityId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåŸå¸‚æ•°æ®æœåŠ¡æŒ‚äº†ï¼Œå°±é»˜è®¤è¿”å›ä¸€ä¸‹æˆ‘è¿™é‡Œè®¾ç½®çš„åŸå¸‚ï¼›å¦‚æœè·å–å¤©æ°”ä¿¡æ¯çš„æœåŠ¡æŒ‚äº†ï¼Œæˆ‘ä»¬å°±ç›´æ¥è¿”å›null;</p>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±ç›¸å½“äºåœ¨feignä¸­å¯ç”¨hystrixï¼Œå°±éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">feign.hystrix.enabled=true</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºå¦‚æœæ ¹æ®åŸå¸‚idè·å–å¤©æ°”ä¿¡æ¯çš„æœåŠ¡ä¸å¯ç”¨æ—¶ï¼Œæˆ‘ä»¬é»˜è®¤ç›´æ¥è¿”å›nullï¼Œæ˜¾ç¤ºé¡µé¢å•¥éƒ½ä¸æ˜¾ç¤ºæ—¶ä¸å¥½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å‰ç«¯åˆ¤æ–­ä¸€ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ä¸ä¸ºç©ºæ—¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;reportModel.report&#125; != null"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"text-success"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;reportModel.report.city&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;p&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--    ç©ºæ°”è´¨é‡æŒ‡æ•°ï¼š&lt;span th:text=" $&#123;reportModel.report.aqi&#125;"&gt;&lt;/span&gt;--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--&lt;/p&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">&lt;!--ä¸‹æ‹‰æ¡†æ˜¾ç¤ºé€‰æ‹©åŸå¸‚--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                    å½“å‰æ¸©åº¦ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">" $&#123;reportModel.report.wendu&#125; + â„ƒ"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">                    æ¸©é¦¨æç¤ºï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">th:text</span>=<span class="string">"$&#123;reportModel.report.ganmao&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--å±•ç¤ºæœªæ¥å¤©æ°”--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card border-info"</span> <span class="attr">th:each</span>=<span class="string">" forecast : $&#123;reportModel.report.forecast&#125;"</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"card-body text-info"</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-text"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;forecast.date&#125;"</span>&gt;</span>æ—¥æœŸ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-text"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;forecast.type&#125;"</span>&gt;</span>å¤©æ°”ç±»å‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-text"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;forecast.high&#125;"</span>&gt;</span>å¤©æ°”ç±»å‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-text"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;forecast.low&#125;"</span>&gt;</span>å¤©æ°”ç±»å‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"card-text"</span> <span class="attr">th:text</span>=<span class="string">"$&#123;forecast.fengxiang&#125;"</span>&gt;</span>å¤©æ°”ç±»å‹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:if</span>=<span class="string">"$&#123;reportModel.report&#125; == null"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¤©æ°”æ•°æ®APIæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼ï¼ï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢å°±æ¥æµ‹è¯•ä¸€æŠŠå§ï¼</p>
<p>é¦–å…ˆæ—¶å®Œå…¨æ­£å¸¸çš„æƒ…å†µï¼Œå„ä¸ªæœåŠ¡éƒ½å¯ç”¨ï¼š</p>
<p>ä¾æ¬¡å¯åŠ¨å¦‚ä¸‹æœåŠ¡ï¼š<code>redis</code>,<code>weather-eureka-server</code>,<code>msa-weather-city-eureka</code>,<code>msa-weather-collection-eureka-feign</code>,<code>msa-weather-data-eureka</code>,<code>msa-weather-report-eureka-feign-gateway-hystrix</code>,<code>msa-eureka-client-zuul</code>è¿™å…­ä¸ªæœåŠ¡ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-7.png" alt="image"></p>
<p>æ­£å¸¸çš„è¯ï¼Œå°±ä¼šçœ‹åˆ°ä¹‹å‰çš„é¡µé¢ï¼š<a href="http://localhost:8083/report/cityId/101180101" target="_blank" rel="noopener">http://localhost:8083/report/cityId/101180101</a></p>
<p>å½“åŸå¸‚æ•°æ®æœåŠ¡ä¸å¯ç”¨ï¼Œç†”æ–­å™¨ç”Ÿæ•ˆï¼š</p>
<p>å…³é—­åŸå¸‚æ•°æ®æœåŠ¡<code>msa-weather-city-eureka</code>ï¼Œé€ æˆæœåŠ¡ä¸å¯ç”¨çš„ç°è±¡ã€‚çœ‹é¡µé¢æ˜¾ç¤ºæ˜¯å¦åªæœ‰æˆ‘å¡è¿›å»çš„å‡æ•°æ®ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-8.png" alt="image"></p>
<p>å¤©æ°”æ•°æ®æœåŠ¡ä¸å¯ç”¨ï¼Œç†”æ–­å™¨ç”Ÿæ•ˆï¼š</p>
<p>å…³é—­å¤©æ°”æ•°æ®APIæœåŠ¡<code>msa-weather-data-eureka</code>.çœ‹é¡µé¢æ˜¯å¦æ˜¾ç¤ºæœåŠ¡æš‚ä¸å¯ç”¨çš„æç¤ºä¿¡æ¯ã€‚</p>
<p>ä¸­é—´æŠ¥äº†ä¸€ä¸ªç©ºæŒ‡é’ˆé”™è¯¯ï¼ŒåŸå› æ˜¯<code>msa-weather-report-eureka-feign-gateway-hystrix</code>ä¸­<code>WeatherReportServiceImpl</code>ä¸­çš„æ–¹æ³•åŸæ¥æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherReportServiceImpl</span> <span class="keyword">implements</span> <span class="title">WeatherReportService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataClient dataClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Weather <span class="title">getDataByCityId2</span><span class="params">(String cityId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ”¹ä¸ºç”±å¤©æ°”æ•°æ®APIå¾®æœåŠ¡æ¥è·å–</span></span><br><span class="line">        WeatherResponse resp = dataClient.getDataByCityId(cityId);</span><br><span class="line">        <span class="keyword">return</span>  resp.getData();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéœ€è¦åˆ¤ç©ºæ“ä½œï¼Œå¦åˆ™æ˜¯ä¸èƒ½è°ƒç”¨getData()è¿™ä¸ªæ–¹æ³•çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherReportServiceImpl</span> <span class="keyword">implements</span> <span class="title">WeatherReportService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataClient dataClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Weather <span class="title">getDataByCityId</span><span class="params">(String cityId)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// æ”¹ä¸ºç”±å¤©æ°”æ•°æ®APIå¾®æœåŠ¡æ¥è·å–</span></span><br><span class="line">        WeatherResponse resp = dataClient.getDataByCityId(cityId);</span><br><span class="line">        Weather weather = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span>(resp != <span class="keyword">null</span>)&#123;</span><br><span class="line">            weather = resp.getData();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  weather;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å­ï¼Œé‡æ–°å¯åŠ¨å¤©æ°”é¢„æŠ¥UIæœåŠ¡ã€‚å°±å¯ä»¥çœ‹åˆ°æ•ˆæœå•¦ï¼</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher11-9.png" alt="image"></p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/05/10-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-é›†ä¸­åŒ–é…ç½®/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/10/05/10-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-é›†ä¸­åŒ–é…ç½®/" class="post-title-link" itemprop="url">09-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-é›†ä¸­åŒ–é…ç½®</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-05 16:54:11" itemprop="dateCreated datePublished" datetime="2019-10-05T16:54:11+08:00">2019-10-05</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/springcloud/" itemprop="url" rel="index"><span itemprop="name">springcloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">3.8k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">3 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœåŠ¡æ‹†åˆ†ä¹‹åï¼Œé…ç½®æ–‡ä»¶å°±å¿…ç„¶éšç€è¿™äº›æ‹†åˆ†çš„æœåŠ¡åˆ†æ•£åœ¨å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œï¼Œç”¨ä¸€ä¸ªé›†ä¸­åŒ–çš„æ–¹å¼ç»Ÿä¸€è¿›è¡Œé…ç½®æ–‡ä»¶çš„é…ç½®ä¸ä¿®æ”¹æ˜¯å¿…è¦çš„ã€‚æœ¬ç« ä»‹ç»spring configçš„åŸºæœ¬ä½¿ç”¨.</p>
<h2 id="é›†ä¸­åŒ–é…ç½®çš„ä¼˜åŠ¿"><a href="#é›†ä¸­åŒ–é…ç½®çš„ä¼˜åŠ¿" class="headerlink" title="é›†ä¸­åŒ–é…ç½®çš„ä¼˜åŠ¿"></a><font color="#8B475D">é›†ä¸­åŒ–é…ç½®çš„ä¼˜åŠ¿</font></h2><p>éšç€çº¿ä¸Šé¡¹ç›®å˜çš„æ—¥ç›Šåºå¤§ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½æ•£è½ç€å„ç§é…ç½®æ–‡ä»¶ï¼Œå¦‚æœé‡‡ç”¨åˆ†å¸ƒå¼çš„å¼€å‘æ¨¡å¼ï¼Œéœ€è¦çš„é…ç½®æ–‡ä»¶éšç€æœåŠ¡å¢åŠ è€Œä¸æ–­å¢å¤šã€‚æŸä¸€ä¸ªåŸºç¡€æœåŠ¡ä¿¡æ¯å˜æ›´ï¼Œéƒ½ä¼šå¼•èµ·ä¸€ç³»åˆ—çš„æ›´æ–°å’Œé‡å¯ï¼Œè¿ç»´è‹¦ä¸å ªè¨€ä¹Ÿå®¹æ˜“å‡ºé”™ã€‚é…ç½®ä¸­å¿ƒä¾¿æ˜¯è§£å†³æ­¤ç±»é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤–éƒ¨çš„ã€é›†ä¸­åŒ–çš„ä¸€ä¸ªé…ç½®ä¸­å¿ƒã€‚</p>
<h2 id="é…ç½®åˆ†ç±»"><a href="#é…ç½®åˆ†ç±»" class="headerlink" title="é…ç½®åˆ†ç±»"></a><font color="#8B475D">é…ç½®åˆ†ç±»</font></h2><ul>
<li>æŒ‰é…ç½®çš„æ¥æºåˆ’åˆ†</li>
</ul>
<p>ä¸»è¦æœ‰æºä»£ç ã€æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ã€è¿œç¨‹è°ƒç”¨ç­‰</p>
<ul>
<li>æŒ‰é…ç½®çš„ç¯å¢ƒåˆ’åˆ†</li>
</ul>
<p>ä¸»è¦æœ‰å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€é¢„å‘å¸ƒç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç­‰ã€‚</p>
<ul>
<li>æŒ‰é…ç½®çš„é›†æˆé˜¶æ®µåˆ’åˆ†</li>
</ul>
<p>ç¼–è¯‘æ—¶ã€æ‰“åŒ…æ—¶å’Œè¿è¡Œæ—¶</p>
<ul>
<li>æŒ‰é…ç½®çš„åŠ è½½æ–¹å¼åˆ’åˆ†</li>
</ul>
<p>å¯åŠ¨åŠ è½½å’ŒåŠ¨æ€åŠ è½½</p>
<h2 id="Spring-Cloud-Config"><a href="#Spring-Cloud-Config" class="headerlink" title="Spring Cloud Config"></a><font color="#8B475D">Spring Cloud Config</font></h2><p>åœ¨æˆ‘ä»¬äº†è§£<code>spring cloud config</code>ä¹‹å‰ï¼Œæˆ‘å¯ä»¥æƒ³æƒ³ä¸€ä¸ªé…ç½®ä¸­å¿ƒæä¾›çš„æ ¸å¿ƒåŠŸèƒ½åº”è¯¥æœ‰ä»€ä¹ˆ</p>
<ul>
<li>æä¾›æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ”¯æŒ</li>
<li>é›†ä¸­ç®¡ç†å„ç¯å¢ƒçš„é…ç½®æ–‡ä»¶</li>
<li>é…ç½®æ–‡ä»¶ä¿®æ”¹ä¹‹åï¼Œå¯ä»¥å¿«é€Ÿçš„ç”Ÿæ•ˆ</li>
<li>å¯ä»¥è¿›è¡Œç‰ˆæœ¬ç®¡ç†</li>
<li>æ”¯æŒå¤§çš„å¹¶å‘æŸ¥è¯¢</li>
<li>æ”¯æŒå„ç§è¯­è¨€</li>
</ul>
<p><code>Spring Cloud Config</code>å¯ä»¥å®Œç¾çš„æ”¯æŒä»¥ä¸Šæ‰€æœ‰çš„éœ€æ±‚ã€‚</p>
<p><strong><code>Spring Cloud Config</code>é¡¹ç›®æ˜¯ä¸€ä¸ªè§£å†³åˆ†å¸ƒå¼ç³»ç»Ÿçš„é…ç½®ç®¡ç†æ–¹æ¡ˆã€‚å®ƒåŒ…å«äº†<code>Client</code>å’Œ<code>Server</code>ä¸¤ä¸ªéƒ¨åˆ†ï¼Œ<code>server</code>æä¾›é…ç½®æ–‡ä»¶çš„å­˜å‚¨ã€ä»¥æ¥å£çš„å½¢å¼å°†é…ç½®æ–‡ä»¶çš„å†…å®¹æä¾›å‡ºå»ï¼Œ<code>client</code>é€šè¿‡æ¥å£è·å–æ•°æ®ã€å¹¶ä¾æ®æ­¤æ•°æ®åˆå§‹åŒ–è‡ªå·±çš„åº”ç”¨ã€‚<code>Spring cloud</code>ä½¿ç”¨<code>git</code>æˆ–<code>svn</code>å­˜æ”¾é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨<code>git</code>.</strong></p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher10-1.png" alt="image"></p>
<h2 id="Serverç«¯"><a href="#Serverç«¯" class="headerlink" title="Serverç«¯"></a><font color="#8B475D">Serverç«¯</font></h2><p>æ³¨å†Œåˆ°<code>eureka</code>çš„å®ä¾‹åï¼š<code>msa-weather-config-server</code></p>
<h5 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="#æ·»åŠ ä¾èµ–"></a>#<font color="#367bdd">æ·»åŠ ä¾èµ–</font></h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-config-server&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h5 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="#é…ç½®æ–‡ä»¶"></a>#<font color="#367bdd">é…ç½®æ–‡ä»¶</font></h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">server.port=8888</span><br><span class="line">spring.application.name=msa-weather-config-server</span><br><span class="line">eureka.client.service-url.defaultZone=http://localhost:8761/eureka/</span><br><span class="line">eureka.client.fetch-registry=true</span><br><span class="line">eureka.client.register-with-eureka=true</span><br><span class="line">spring.cloud.config.server.git.uri=https://github.com/xiaogaohan/spring-cloud-config-center</span><br><span class="line">spring.cloud.config.server.git.search-paths=config-repo</span><br></pre></td></tr></table></figure>

<p><code>config-repo</code>è¿™ä¸ªæ–‡ä»¶å¤¹æ˜¯ç”±è‡ªå·±åœ¨<code>github</code>ä¸Šåˆ›å»ºçš„ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼š<code>msa-weather-config-client-dev.properties</code>,é‡Œé¢çš„å†…å®¹ä¸º<code>auther=gh.com</code>(éšä¾¿å†™ç‚¹ä¸œè¥¿ä»¥ä¾›æµ‹è¯•)</p>
<blockquote>
<p><font color="#333">ä»“åº“ä¸­çš„é…ç½®æ–‡ä»¶ä¼šè¢«è½¬æ¢æˆwebæ¥å£ï¼Œè®¿é—®å¯ä»¥å‚ç…§ä»¥ä¸‹çš„è§„åˆ™ï¼š<br><br><br>/{application}/{profile}[/{label}]<br><br><br>/{application}-{profile}.yml<br><br><br>/{label}/{application}-{profile}.yml<br><br><br>/{application}-{profile}.properties<br><br><br>/{label}/{application}-{profile}.properties</font></p>
</blockquote>
<p>æˆ‘è¿™é‡Œçš„<code>msa-weather-config-client-dev.properties</code>,å®ƒçš„<code>application</code>æ˜¯<code>msa-weather-config-client</code>ï¼Œ<code>profile</code>æ˜¯<code>dev</code>ã€‚<code>client</code>ä¼šæ ¹æ®å¡«å†™çš„å‚æ•°æ¥é€‰æ‹©è¯»å–å¯¹åº”çš„é…ç½®ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher10-2.png" alt="image"></p>
<h5 id="å¯åŠ¨ç±»"><a href="#å¯åŠ¨ç±»" class="headerlink" title="#å¯åŠ¨ç±»"></a>#<font color="#367bdd">å¯åŠ¨ç±»</font></h5><p>å¯åŠ¨ç±»æ·»åŠ <code>@EnableConfigServer</code>ï¼Œæ¿€æ´»å¯¹é…ç½®ä¸­å¿ƒçš„æ”¯æŒ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherEurekaClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(WeatherEurekaClientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ°æ­¤<code>server</code>ç«¯ç›¸å…³é…ç½®å·²ç»å®Œæˆ.</p>
<h5 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="#æµ‹è¯•"></a>#<font color="#367bdd">æµ‹è¯•</font></h5><p>è®¿é—® <a href="http://localhost:8888/auther/dev" target="_blank" rel="noopener">http://localhost:8888/auther/dev</a> è¿”å›ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;name&quot;:&quot;auther&quot;,</span><br><span class="line">&quot;profiles&quot;:[&quot;dev&quot;],</span><br><span class="line">&quot;label&quot;:null,</span><br><span class="line">&quot;version&quot;:&quot;7238233698d6234805a161b3f8badaceb425eed4&quot;,</span><br><span class="line">&quot;state&quot;:&quot;null&quot;,</span><br><span class="line">propertySources&quot;:[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¿é—® <a href="http://localhost:8888/msa-weather-config-client-dev.properties" target="_blank" rel="noopener">http://localhost:8888/msa-weather-config-client-dev.properties</a> è¿”å›é…ç½®æ–‡ä»¶çš„å†…å®¹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">auther: gh.com</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥è¯»åˆ°<code>auther</code>é‡Œçš„å†…å®¹ï¼Œè¯´æ˜æœåŠ¡ç«¯é…ç½®æˆåŠŸã€‚</p>
<h2 id="Clientç«¯"><a href="#Clientç«¯" class="headerlink" title="Clientç«¯"></a><font color="#8B475D">Clientç«¯</font></h2><p>æ³¨å†Œåˆ°<code>eureka</code>çš„å®ä¾‹åï¼š<code>msa-weather-config-client</code></p>
<h5 id="æ·»åŠ ä¾èµ–-1"><a href="#æ·»åŠ ä¾èµ–-1" class="headerlink" title="#æ·»åŠ ä¾èµ–:"></a>#<font color="#367bdd">æ·»åŠ ä¾èµ–:</font></h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">		&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h5 id="é…ç½®æ–‡ä»¶-1"><a href="#é…ç½®æ–‡ä»¶-1" class="headerlink" title="#é…ç½®æ–‡ä»¶:"></a>#<font color="#367bdd">é…ç½®æ–‡ä»¶:</font></h5><p>éœ€è¦é…ç½®ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼Œ<code>application.properties</code>å’Œ<code>bootstrap.properties</code></p>
<p><code>application.properties</code>å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server.port=8081</span><br><span class="line">spring.application.name=msa-weather-config-client</span><br><span class="line">eureka.client.service-url.defaultZone=http://localhost:8761/eureka</span><br></pre></td></tr></table></figure>

<p><code>bootstrap.properties</code>å¦‚ä¸‹ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.cloud.config.name=msa-weather-config-client</span><br><span class="line">eureka.client.service-url.defaultZone=http://localhost:8761/eureka</span><br><span class="line">spring.cloud.config.profile=dev</span><br><span class="line">spring.cloud.config.uri=http://localhost:8888/</span><br><span class="line">spring.cloud.config.label=master</span><br></pre></td></tr></table></figure>

<p><code>spring.application.name</code>ï¼šå¯¹åº”{<code>application</code>}éƒ¨åˆ†</p>
<p><code>spring.cloud.config.profile</code>ï¼šå¯¹åº”{<code>profile</code>}éƒ¨åˆ†</p>
<p><code>spring.cloud.config.label</code>ï¼šå¯¹åº”<code>git</code>çš„åˆ†æ”¯ã€‚å¦‚æœé…ç½®ä¸­å¿ƒä½¿ç”¨çš„æ˜¯æœ¬åœ°å­˜å‚¨ï¼Œåˆ™è¯¥å‚æ•°æ— ç”¨</p>
<p><code>spring.cloud.config.uri</code>ï¼šé…ç½®ä¸­å¿ƒçš„å…·ä½“åœ°å€,å°±æ˜¯<code>server</code>ç«¯åœ°å€</p>
<blockquote>
<p><font color="#333">ç‰¹åˆ«æ³¨æ„ï¼šä¸Šé¢è¿™äº›ä¸spring-cloudç›¸å…³çš„å±æ€§å¿…é¡»é…ç½®åœ¨bootstrap.propertiesä¸­ï¼Œconfigéƒ¨åˆ†å†…å®¹æ‰èƒ½è¢«æ­£ç¡®åŠ è½½ã€‚å› ä¸ºconfigçš„ç›¸å…³é…ç½®ä¼šå…ˆäºapplication.propertiesï¼Œè€Œbootstrap.propertiesçš„åŠ è½½ä¹Ÿæ˜¯å…ˆäºapplication.propertiesã€‚</font></p>
</blockquote>
<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(SpringRunner.class)</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherEurekaClientApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;auther&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String auther;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Assert.assertEquals(<span class="string">"oursnail.cn"</span>,auther);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•é€šè¿‡ï¼Œè¯´æ˜è·å–å†…å®¹æˆåŠŸã€‚</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/03/09-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-APIç½‘å…³/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/10/03/09-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-APIç½‘å…³/" class="post-title-link" itemprop="url">09-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-APIç½‘å…³</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-03 16:54:11" itemprop="dateCreated datePublished" datetime="2019-10-03T16:54:11+08:00">2019-10-03</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/springcloud/" itemprop="url" rel="index"><span itemprop="name">springcloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">2.5k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">2 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨å‰é¢æˆ‘ä»¬å®ç°äº†æœåŠ¡çš„æ³¨å†Œï¼Œå‘ç°å’Œæ¶ˆè´¹é—®é¢˜ï¼Œæ•´ä¸ªå°ç³»ç»Ÿå°±å¯ä»¥è·‘èµ·æ¥äº†ï¼Œä½†æ˜¯å¯¹äºå¤æ‚çš„ç³»ç»Ÿï¼Œä¸€ä¸ªç»Ÿä¸€çš„å…¥å£è¿˜æ˜¯å¿…è¦çš„ï¼Œä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸‹ç½‘å…³æ˜¯ä»€ä¹ˆå¹¶ä»‹ç»zuulç»„ä»¶çš„ä½¿ç”¨ã€‚</p>
<h2 id="API-ç½‘å…³"><a href="#API-ç½‘å…³" class="headerlink" title="API ç½‘å…³"></a><font color="#8B475D">API ç½‘å…³</font></h2><blockquote>
<p><font color="#333">APIç½‘å…³æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæ˜¯ç³»ç»Ÿçš„å”¯ä¸€å…¥å£ã€‚ä»é¢å‘å¯¹è±¡è®¾è®¡çš„è§’åº¦çœ‹ï¼Œå®ƒä¸å¤–è§‚æ¨¡å¼ç±»ä¼¼ã€‚APIç½‘å…³å°è£…äº†ç³»ç»Ÿå†…éƒ¨æ¶æ„ï¼Œä¸ºæ¯ä¸ªå®¢æˆ·ç«¯æä¾›ä¸€ä¸ªå®šåˆ¶çš„APIã€‚å®ƒå¯èƒ½è¿˜å…·æœ‰å…¶å®ƒèŒè´£ï¼Œå¦‚èº«ä»½éªŒè¯ã€ç›‘æ§ã€è´Ÿè½½å‡è¡¡ã€ç¼“å­˜ã€è¯·æ±‚åˆ†ç‰‡ä¸ç®¡ç†ã€é™æ€å“åº”å¤„ç†ã€‚<br>APIç½‘å…³æ–¹å¼çš„æ ¸å¿ƒè¦ç‚¹æ˜¯ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯å’Œæ¶ˆè´¹ç«¯éƒ½é€šè¿‡ç»Ÿä¸€çš„ç½‘å…³æ¥å…¥å¾®æœåŠ¡ï¼Œåœ¨ç½‘å…³å±‚å¤„ç†æ‰€æœ‰çš„éä¸šåŠ¡åŠŸèƒ½ã€‚é€šå¸¸ï¼Œç½‘å…³ä¹Ÿæ˜¯æä¾›REST/HTTPçš„è®¿é—®APIã€‚æœåŠ¡ç«¯é€šè¿‡API-GWæ³¨å†Œå’Œç®¡ç†æœåŠ¡ã€‚</font></p>
</blockquote>
<p>æ€ä¹ˆç†è§£å‘¢ï¼Ÿ ç›¸å½“äºè¯´apiç½‘å…³æ˜¯ä¸€ä¸ªå¤–ç•Œè®¿é—®æ•´ä¸ªç³»ç»Ÿçš„ç»Ÿä¸€èµ„æºçš„å®šä½å™¨ï¼Œå°†ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿå†…éƒ¨çš„å¤šä¸ªå¾®æœåŠ¡è¿›è¡Œå°è£…ï¼Œå¯¹å¤–æä¾›å”¯ä¸€è®¿é—®å…¥å£ï¼Œå®ç°ç³»ç»Ÿå†…é«˜å†…èšï¼Œç³»ç»Ÿé—´é€šè¿‡ç½‘å…³äº¤äº’è¾¾åˆ°æ¾è€¦åˆçš„æ•ˆæœã€‚</p>
<h5 id="å•èŠ‚ç‚¹ç½‘å…³"><a href="#å•èŠ‚ç‚¹ç½‘å…³" class="headerlink" title="#å•èŠ‚ç‚¹ç½‘å…³"></a>#<font color="#367bdd">å•èŠ‚ç‚¹ç½‘å…³</font></h5><p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher9-2.png" alt="image"></p>
<h5 id="Backends-for-frontends-ç½‘å…³"><a href="#Backends-for-frontends-ç½‘å…³" class="headerlink" title="#Backends for frontends ç½‘å…³"></a>#<font color="#367bdd">Backends for frontends ç½‘å…³</font></h5><p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher9-3.png" alt="image"></p>
<h2 id="API-ç½‘å…³çš„ä¼˜ç¼ºç‚¹"><a href="#API-ç½‘å…³çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="API ç½‘å…³çš„ä¼˜ç¼ºç‚¹"></a><font color="#8B475D">API ç½‘å…³çš„ä¼˜ç¼ºç‚¹</font></h2><h5 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="#ä¼˜ç‚¹"></a>#<font color="#367bdd">ä¼˜ç‚¹</font></h5><p>å°è£…äº†åº”ç”¨ç¨‹åºçš„å†…éƒ¨ç»“æ„ã€‚å®¢æˆ·ç«¯åªéœ€è¦åŒç½‘å…³äº¤äº’ï¼Œè€Œä¸å¿…è°ƒç”¨ç‰¹å®šçš„æœåŠ¡ï¼ˆç»Ÿä¸€APIå…¥å£ï¼‰ã€‚API ç½‘å…³ä¸ºæ¯ä¸€ç±»å®¢æˆ·ç«¯æä¾›äº†ç‰¹å®šçš„ API ï¼Œä»è€Œå‡å°‘å®¢æˆ·ç«¯ä¸åº”ç”¨ç¨‹åºé—´çš„äº¤äº’æ¬¡æ•°ï¼Œç®€åŒ–å®¢æˆ·ç«¯ä»£ç çš„å¤„ç†ï¼ˆé›†åˆå¤šä¸ªAPIï¼‰ã€‚</p>
<p>å¦å¤–ï¼Œå¯ä»¥é¿å…å†…éƒ¨ä¿¡æ¯æ³„éœ²ç»™å¤–éƒ¨ã€‚å¯ä»¥ä¸ºå¾®æœåŠ¡æ·»åŠ é¢å¤–çš„å®‰å…¨å±‚ã€‚æ”¯æŒæ··åˆé€šä¿¡åè®®ã€‚é™ä½æ„å»ºå¾®æœåŠ¡çš„å¤æ‚æ€§ã€‚</p>
<h5 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="#ç¼ºç‚¹"></a>#<font color="#367bdd">ç¼ºç‚¹</font></h5><p>å¢åŠ äº†ä¸€ä¸ªå¿…é¡»å¼€å‘ã€éƒ¨ç½²å’Œç»´æŠ¤çš„é«˜å¯ç”¨ç»„ä»¶ã€‚è¿˜æœ‰ä¸€ä¸ªé£é™©æ˜¯ API ç½‘å…³å˜æˆäº†å¼€å‘ç“¶é¢ˆã€‚ä¸ºäº†æš´éœ²æ¯ä¸ªå¾®æœåŠ¡ï¼Œå¼€å‘äººå‘˜å¿…é¡»æ›´æ–° API ç½‘å…³ã€‚API ç½‘å…³çš„æ›´æ–°è¿‡ç¨‹è¦å°½å¯èƒ½åœ°ç®€å•ï¼Œå¦åˆ™ä¸ºäº†æ›´æ–°ç½‘å…³ï¼Œå¼€å‘äººå‘˜å°†ä¸å¾—ä¸æ’é˜Ÿç­‰å¾…ã€‚ä¸è¿‡ï¼Œè™½ç„¶æœ‰è¿™äº›ä¸è¶³ï¼Œä½†å¯¹äºå¤§å¤šæ•°ç°å®ä¸–ç•Œçš„åº”ç”¨ç¨‹åºè€Œè¨€ä½¿ç”¨ API ç½‘å…³æ˜¯åˆç†çš„ã€‚ï¼ˆåœ¨æ¶æ„ä¸Šéœ€è¦é¢å¤–è€ƒè™‘æ›´å¤šç¼–æ’å’Œç®¡ç†ï¼›è·¯ç”±é€»è¾‘é…ç½®è¦è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼›å¯èƒ½å¼•å‘å•ç‚¹æ•…éšœï¼‰</p>
<h2 id="Zuul"><a href="#Zuul" class="headerlink" title="Zuul"></a><font color="#8B475D">Zuul</font></h2><h5 id="Zuulçš„å®šä¹‰"><a href="#Zuulçš„å®šä¹‰" class="headerlink" title="#Zuulçš„å®šä¹‰"></a>#<font color="#367bdd">Zuulçš„å®šä¹‰</font></h5><p>Zuulæ˜¯Spring Cloudå…¨å®¶æ¡¶ä¸­çš„å¾®æœåŠ¡APIç½‘å…³ã€‚</p>
<p>æ‰€æœ‰ä»è®¾å¤‡æˆ–ç½‘ç«™æ¥çš„è¯·æ±‚éƒ½ä¼šç»è¿‡<code>Zuul</code>åˆ°è¾¾åç«¯çš„<code>Netflix</code>åº”ç”¨ç¨‹åºã€‚ä½œä¸ºä¸€ä¸ªè¾¹ç•Œæ€§è´¨çš„åº”ç”¨ç¨‹åºï¼Œ<code>Zuul</code>æä¾›äº†åŠ¨æ€è·¯ç”±ã€ç›‘æ§ã€é‡‘ä¸é›€æµ‹è¯•ã€å¼¹æ€§è´Ÿè½½å’Œå®‰å…¨ç­‰åŠŸèƒ½ã€‚Zuulåº•å±‚åˆ©ç”¨å„ç§<code>filter</code>å®ç°ä¸Šé¢çš„åŠŸèƒ½ã€‚</p>
<h5 id="Zuulæµ‹è¯•"><a href="#Zuulæµ‹è¯•" class="headerlink" title="#Zuulæµ‹è¯•"></a>#<font color="#367bdd">Zuulæµ‹è¯•</font></h5><p>åœ¨ä¹‹å‰çš„é¡¹ç›®é‡Œé¢æœ‰<code>msa-weather-eureka-server</code>å’Œ<code>msa-weather-eureka-client</code>,ä¸€ä¸ªå¯åŠ¨ç«¯å£æ˜¯8761ï¼Œå¦å¤–ä¸€ä¸ªä½¿ç”¨é»˜è®¤çš„8080ï¼ŒåŸºäº<code>msa-weather-eureka-client</code>æ–°å»ºä¸€ä¸ªé¡¹ç›®<code>msa-weather-eureka-client-zuul</code>ï¼Œæ”¹åŠ¨å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zuul.routes.hi.path=/hi<span class="comment">/**</span></span><br><span class="line"><span class="comment">zuul.routes.hi.service-id=msa-weather-eureka-client</span></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„å«ä¹‰æ˜¯ï¼šå®šä¹‰ä¸€ä¸ªåå­—å«åšhiçš„è·¯ç”±è§„åˆ™ï¼ˆè‡ªå®šä¹‰ï¼‰ï¼Œæˆ‘ä»¬è®¿é—®<code>/hi/**</code> è¿™ä¸ªè·¯å¾„çš„æ—¶å€™ï¼Œå°±ä¼šè½¬å‘åˆ°<code>msa-weather-eureka-client</code>è¿™ä¸ªæœåŠ¡ä¸‹çš„è·¯å¾„ã€‚</p>
<p>æ¯”å¦‚æˆ‘è¿™é‡Œçš„<code>msa-weather-eureka-client</code>æœ‰ä¸€ä¸ª<code>controller</code>è·¯å¾„ä¸º<code>&quot;hello&quot;</code>ï¼Œè°ƒç”¨<code>localhost:8081/hello</code>å°±å¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚é‚£ä¹ˆæœ‰äº†<code>zuul</code>é…ç½®ä¹‹åï¼Œæˆ‘å¯ä»¥è®¿é—®<code>localhost:8080/hi/hello</code>ä¹Ÿå¯ä»¥è®¿é—®åˆ°è¿™ä¸ªè·¯å¾„äº†ã€‚</p>
<h5 id="æ”¹é€ ç³»ç»Ÿ"><a href="#æ”¹é€ ç³»ç»Ÿ" class="headerlink" title="#æ”¹é€ ç³»ç»Ÿ"></a>#<font color="#367bdd">æ”¹é€ ç³»ç»Ÿ</font></h5><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼š<code>msa-eureka-client-zuul</code>ã€‚ä¸»è¦æ˜¯å®šä¹‰ç½‘å…³çš„è·¯ç”±ã€‚</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">spring.application.name=msa-weather-eureka-client-zuul</span></span><br><span class="line"><span class="string">eureka.client.service-url.defaultZone=http://localhost:8761/eureka</span></span><br><span class="line"></span><br><span class="line"><span class="string">zuul.routes.city.path=/city/**</span></span><br><span class="line"><span class="string">zuul.routes.city.service-id=msa-weather-city-eureka</span></span><br><span class="line"></span><br><span class="line"><span class="string">zuul.routes.data.path=/data/**</span></span><br><span class="line"><span class="string">zuul.routes.data.service-id=msa-weather-data-eureka</span></span><br></pre></td></tr></table></figure>

<p>okï¼Œä¸‹é¢æˆ‘ä»¬å°±ä¿®æ”¹<code>msa-weather-collection-cureka-feign</code>å’Œ<code>msa-weather-report-feign</code>.å¤åˆ¶ä¸ºæ–°çš„é¡¹ç›®ï¼š<code>msa-weather-collection-cureka-feign-zuul</code>å’Œ<code>msa-weather-report-feign-zuul</code></p>
<p>ä»¥<code>msa-weather-report-feign-zuul</code>ä¸ºä¾‹ï¼Œå…¶å®ä»–ä¾æ‰˜äºä¸¤ä¸ªæœåŠ¡:<code>msa-weather-data-eureka</code>å’Œ<code>msa-weather-ciy-eureka</code>ï¼Œè¿™ä¸¤ä¸ªæˆ‘ä»¬åªéœ€è¦å†™åœ¨ä¸€ä¸ªæ¥å£å†…ï¼Œè°ƒç”¨ç½‘å…³é‡Œå®šä¹‰çš„è·¯ç”±å³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@FeignClient</span>(<span class="string">"msa-weather-eureka-client-zuul"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DataClient</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–åŸå¸‚åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/city/cities"</span>)</span><br><span class="line">    <span class="function">List&lt;City&gt;  <span class="title">listCity</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®åŸå¸‚Idæ¥æŸ¥è¯¢å¤©æ°”æ•°æ®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> cityId</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/data/weather/cityId/&#123;cityId&#125;"</span>)</span><br><span class="line">    <span class="function">WeatherResponse <span class="title">getDataByCityId</span><span class="params">(@PathVariable(<span class="string">"cityId"</span>)</span> String cityId)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å­ï¼Œè¿™ä¸ª<code>DataClient</code>å°±å–ä»£äº†ä¹‹å‰çš„<code>cityClient</code>å’Œ<code>WeatherClient</code>ã€‚æ”¹é€ å®Œæˆã€‚</p>
<p>æµ‹è¯•æ— é—®é¢˜ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher9-1.png" alt="image"></p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/02/08-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-å¾®æœåŠ¡çš„æ¶ˆè´¹/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/10/02/08-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-å¾®æœåŠ¡çš„æ¶ˆè´¹/" class="post-title-link" itemprop="url">08-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-å¾®æœåŠ¡çš„æ¶ˆè´¹</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-02 16:54:11" itemprop="dateCreated datePublished" datetime="2019-10-02T16:54:11+08:00">2019-10-02</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/springcloud/" itemprop="url" rel="index"><span itemprop="name">springcloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">2.6k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">2 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>åœ¨è§£å†³äº†æœåŠ¡æ³¨å†Œå’Œå‘ç°ä¸¤ä¸ªé—®é¢˜ä¹‹åï¼Œå°±è¦è§£å†³æœåŠ¡æ¶ˆè´¹é—®é¢˜äº†ã€‚æœ¬èŠ‚é‡ç‚¹ä»‹ç»feignçš„ä½¿ç”¨ã€‚</p>
<h2 id="å‘ç°æ¨¡å¼"><a href="#å‘ç°æ¨¡å¼" class="headerlink" title="å‘ç°æ¨¡å¼"></a><font color="#8B475D">å‘ç°æ¨¡å¼</font></h2><h5 id="ç›´è¿æ¨¡å¼"><a href="#ç›´è¿æ¨¡å¼" class="headerlink" title="#ç›´è¿æ¨¡å¼"></a>#<font color="#367bdd">ç›´è¿æ¨¡å¼</font></h5><p>  ç›´æ¥å»è¿æ¥æŸä¸ªurlï¼Œæ¯”è¾ƒç®€å•ç²—æš´ï¼Œä½†æ˜¯ä¸èƒ½å®ç°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨ï¼Œä½¿ç”¨æ¯”è¾ƒå°‘ã€‚</p>
<h5 id="å®¢æˆ·ç«¯å‘ç°æ¨¡å¼ï¼š"><a href="#å®¢æˆ·ç«¯å‘ç°æ¨¡å¼ï¼š" class="headerlink" title="#å®¢æˆ·ç«¯å‘ç°æ¨¡å¼ï¼š"></a>#<font color="#367bdd">å®¢æˆ·ç«¯å‘ç°æ¨¡å¼ï¼š</font></h5><ul>
<li>æœåŠ¡å®ä¾‹å¯åŠ¨åï¼Œå°†è‡ªå·±çš„ä½ç½®ä¿¡æ¯æäº¤åˆ°æœåŠ¡æ³¨å†Œè¡¨</li>
<li>å®¢æˆ·ç«¯ä»æœåŠ¡æ³¨å†Œè¡¨è¿›è¡ŒæŸ¥è¯¢ï¼Œæ¥è·å–å¯ç”¨çš„æœåŠ¡å®ä¾‹</li>
<li>å®¢æˆ·ç«¯è‡ªè¡Œä½¿ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•ä»å¤šä¸ªæœåŠ¡å®ä¾‹ä¸­é€‰æ‹©ä¸€ä¸ª</li>
</ul>
<h5 id="æœåŠ¡ç«¯å‘ç°æ¨¡å¼ï¼š"><a href="#æœåŠ¡ç«¯å‘ç°æ¨¡å¼ï¼š" class="headerlink" title="#æœåŠ¡ç«¯å‘ç°æ¨¡å¼ï¼š"></a>#<font color="#367bdd">æœåŠ¡ç«¯å‘ç°æ¨¡å¼ï¼š</font></h5><p>è´Ÿè½½å‡è¡¡çš„å®ç°åœ¨æœåŠ¡ç«¯ã€‚è€Œå®¢æˆ·ç«¯å‘ç°æ¨¡å¼çš„è´Ÿè½½å‡è¡¡ç”±å®¢æˆ·ç«¯æ¥å®ç°ã€‚</p>
<h2 id="æœåŠ¡çš„æ¶ˆè´¹è€…"><a href="#æœåŠ¡çš„æ¶ˆè´¹è€…" class="headerlink" title="æœåŠ¡çš„æ¶ˆè´¹è€…"></a><font color="#8B475D">æœåŠ¡çš„æ¶ˆè´¹è€…</font></h2><p><code>Apache HttpClient</code>ï¼šè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<p><code>Ribbon</code>: åŸºäºå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å·¥å…·ã€‚å¯ä»¥åŸºäºHttpæˆ–è€…Tcpå®ç°è´Ÿè½½å‡è¡¡ã€‚</p>
<p>ç›´æ¥æ ¹æ®æœåŠ¡çš„åå­—æ¥æ¶ˆè´¹ï¼Œå…·ä½“æ˜¯è¿åˆ°å“ªä¸€ä¸ªå…·ä½“çš„ipå»æ¶ˆè´¹æ˜¯ä¸ç”¨ç®¡çš„ï¼Œå› ä¸ºä»–å·²ç»åœ¨å®¢æˆ·ç«¯ä¸Šåšäº†ä¸€å®šçš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œç”±ä»–çš„ç®—æ³•æ¥å†³å®šã€‚</p>
<p><code>Febin</code>:</p>
<p>Feignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„ä¼ªHttpå®¢æˆ·ç«¯ï¼Œå®ƒä½¿å¾—å†™Httpå®¢æˆ·ç«¯å˜å¾—æ›´ç®€å•ã€‚ä½¿ç”¨Feignï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£å¹¶æ³¨è§£ã€‚å®ƒå…·æœ‰å¯æ’æ‹”çš„æ³¨è§£ç‰¹æ€§ï¼Œå¯ä½¿ç”¨Feign æ³¨è§£å’ŒJAX-RSæ³¨è§£ã€‚Feignæ”¯æŒå¯æ’æ‹”çš„ç¼–ç å™¨å’Œè§£ç å™¨ã€‚Feigné»˜è®¤é›†æˆäº†Ribbonï¼Œå¹¶å’ŒEurekaç»“åˆï¼Œé»˜è®¤å®ç°äº†è´Ÿè½½å‡è¡¡çš„æ•ˆæœã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥æä¸ªdemoæµ‹è¯•ä¸€æŠŠï¼</p>
<h2 id="fegin"><a href="#fegin" class="headerlink" title="fegin"></a><font color="#8B475D">fegin</font></h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬ä¹‹å‰çš„å·¥ä½œä¸­å·²ç»ç”±äº†ä¸€ä¸ª<code>Eureka server</code>ï¼Œå†æ‹¿ä¸€ä¸ªå«åš<code>msa-weather-city-server</code>çš„æœåŠ¡æ¥æµ‹è¯•ã€‚è¿™ä¸ªæœåŠ¡çš„ä¸»è¦åŠŸèƒ½æ˜¯è·å–åŸå¸‚ä¿¡æ¯ã€‚</p>
<h5 id="å¼•å…¥ä¾èµ–ã€æ·»åŠ æ³¨è§£"><a href="#å¼•å…¥ä¾èµ–ã€æ·»åŠ æ³¨è§£" class="headerlink" title="#å¼•å…¥ä¾èµ–ã€æ·»åŠ æ³¨è§£"></a>#<font color="#367bdd">å¼•å…¥ä¾èµ–ã€æ·»åŠ æ³¨è§£</font></h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.2.0.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨ç¨‹åºçš„å¯åŠ¨ç±»<code>WeatherApplication</code> ï¼ŒåŠ ä¸Š<code>@EnableFeignClients</code>æ³¨è§£å¼€å¯<code>Feign</code>çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(WeatherApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="#é…ç½®æ–‡ä»¶"></a>#<font color="#367bdd">é…ç½®æ–‡ä»¶</font></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server.port=<span class="number">8761</span></span><br><span class="line">eureka.instance.hostname=localhost</span><br><span class="line">eureka.client.register-with-eureka=<span class="keyword">false</span></span><br><span class="line">eureka.client.fetch-registry=<span class="keyword">false</span></span><br><span class="line">eureka.client.service-url.defaultZone=http:<span class="comment">//localhost:8761/eureka</span></span><br></pre></td></tr></table></figure>

<h5 id="å®šä¹‰feignæ¥å£"><a href="#å®šä¹‰feignæ¥å£" class="headerlink" title="#å®šä¹‰feignæ¥å£"></a>#<font color="#367bdd">å®šä¹‰feignæ¥å£</font></h5><p>å®šä¹‰ä¸€ä¸ª<code>feign</code>æ¥å£ï¼Œé€šè¿‡@ FeignClientï¼ˆâ€œæœåŠ¡åâ€ï¼‰ï¼Œæ¥æŒ‡å®šè°ƒç”¨å“ªä¸ªæœåŠ¡ã€‚æ¯”å¦‚åœ¨ä»£ç ä¸­è°ƒç”¨äº†<code>msa-weather-city-eureka</code>æœåŠ¡çš„<code>/cities</code>æ¥å£æ¥è·å–æ‰€æœ‰çš„åŸå¸‚åˆ—è¡¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(<span class="string">"msa-weather-city-eureka"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CityClient</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/cities"</span>)</span><br><span class="line">    <span class="function">String <span class="title">listCity</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="å®šä¹‰APIæ¥ä¾›æµè§ˆå™¨è°ƒç”¨"><a href="#å®šä¹‰APIæ¥ä¾›æµè§ˆå™¨è°ƒç”¨" class="headerlink" title="#å®šä¹‰APIæ¥ä¾›æµè§ˆå™¨è°ƒç”¨"></a>#<font color="#367bdd">å®šä¹‰APIæ¥ä¾›æµè§ˆå™¨è°ƒç”¨</font></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CityClient cityClient;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"cities"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span></span>&#123;</span><br><span class="line">        String res = cityClient.listCity();</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œå¯åŠ¨æœåŠ¡ä¸­å¿ƒ<code>Eureka server</code>å’ŒæœåŠ¡æä¾›æ–¹<code>msa-weather-city-server</code>ä»¥åŠæœ¬æ¶ˆè´¹æœåŠ¡ã€‚å†æµè§ˆå™¨ä¸­è®¿é—®å¯¹åº”çš„urlå°±å¯ä»¥è°ƒç”¨<code>msa-weather-city-server</code>æä¾›çš„æœåŠ¡ã€‚</p>
<h2 id="ç”¨Feignç»§ç»­å®Œå–„å¤©æ°”é¡¹ç›®"><a href="#ç”¨Feignç»§ç»­å®Œå–„å¤©æ°”é¡¹ç›®" class="headerlink" title="ç”¨Feignç»§ç»­å®Œå–„å¤©æ°”é¡¹ç›®"></a><font color="#8B475D">ç”¨Feignç»§ç»­å®Œå–„å¤©æ°”é¡¹ç›®</font></h2><p>æœ‰ä¸‰ä¸ª<code>TODO</code>é¡¹ï¼š</p>
<ul>
<li>æ•°æ®é‡‡é›†å¾®æœåŠ¡åœ¨å¤©æ°”æ•°æ®åŒæ­¥ä»»åŠ¡ä¸­ï¼Œä¾èµ–äºåŸå¸‚æ•°æ®APIå¾®æœåŠ¡</li>
<li>å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡æŸ¥è¯¢å¤©æ°”ä¿¡æ¯ï¼Œä¾èµ–äºå¤©æ°”æ•°æ®APIå¾®æœåŠ¡</li>
<li>å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡æä¾›çš„åŸå¸‚åˆ—è¡¨ï¼Œä¾èµ–äºåŸå¸‚æ•°æ®APIå¾®æœåŠ¡</li>
</ul>
<p>é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œéœ€è¦å»é›†æˆFeignå»æ¶ˆè´¹çš„å¾®æœåŠ¡åªæœ‰ä¸¤ä¸ªï¼š<code>msa-weather-collection-eureka</code>å’Œ<code>msa-weather-report-eureka</code>ã€‚æˆ‘ä»¬å°†å…¶æ”¹é€ ä¸ºï¼š<code>msa-weather-collection-eureka-feign</code>å’Œ<code>msa-weather-report-eureka-feign</code>ã€‚</p>
<p>è¿™é‡Œå°±ä»¥<code>msa-weather-collection-eureka</code>ä¸ºä¾‹ï¼Œæ­¥éª¤åŸºæœ¬ä¸ä¸Šé¢ä¸€æ ·ã€‚é¦–å…ˆæ˜¯å¼•å…¥ä¾èµ–ï¼Œç„¶ååŠ ä¸Šæ³¨è§£å¼€å¯<code>Feign</code>åŠŸèƒ½ã€‚æ–°å»ºä¸€ä¸ªæ¥å£ï¼Œè¿˜æ˜¯è·å–åŸå¸‚åˆ—è¡¨ã€‚æˆ‘åªè¦æŒ‡å®šå¥½é‚£ä¸ªåŸå¸‚åˆ—è¡¨çš„å¾®æœåŠ¡çš„åå­—å’Œè·¯å¾„ï¼Œå°±å¯ä»¥è·å–åˆ°äº†ã€‚ä¸æ¸…æ¥šç›´æ¥çœ‹ä»£ç å³å¯ã€‚</p>
<p>é‚£ä¹ˆåœ¨å…¨éƒ¨æ”¹å¥½ä¹‹åï¼Œæˆ‘ä»¬å¯åŠ¨è¿™äº”ä¸ªé¡¹ç›®ã€‚ä½†æ˜¯æˆ‘ä»¬è¦æ³¨æ„ï¼Œå…ˆå¯åŠ¨<code>weather-eureka-server</code>ï¼Œæ¥æä¾›æ³¨å†Œçš„æœåŠ¡ã€‚ç„¶åå¯åŠ¨åŸå¸‚æ•°æ®æœåŠ¡ï¼Œå› ä¸ºå¤©æ°”æ•°æ®é‡‡é›†è¦ç”¨åˆ°ä»–ã€‚ç„¶åå¯åŠ¨å¤©æ°”æ•°æ®é‡‡é›†æœåŠ¡ã€‚ç„¶åä¸€æ¬¡å¯åŠ¨å¤©æ°”æ•°æ®APIæœåŠ¡å’Œå¤©æ°”é¢„æŠ¥UIæ˜¾ç¤ºæœåŠ¡ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬è®¿é—®å¤©æ°”é¢„æŠ¥UIå¯¹åº”çš„URL,ä»¥éƒ‘å·ä¸ºä¾‹ï¼š<br><code>http://localhost:8083/report/cityId/101180101</code>ï¼Œå¦‚æœåŠŸèƒ½æ˜¯æ­£å¸¸çš„ï¼Œæ ‡è¯†å¾®æœåŠ¡æ”¹é€ åˆæ­¥æˆåŠŸã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher8-3.png" alt="image"></p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/30/07-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-å¾®æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/30/07-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-å¾®æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°/" class="post-title-link" itemprop="url">07-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-å¾®æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-09-30 16:54:11" itemprop="dateCreated datePublished" datetime="2019-09-30T16:54:11+08:00">2019-09-30</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/springcloud/" itemprop="url" rel="index"><span itemprop="name">springcloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">4.8k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">4 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>æœ¬æ–‡ä¸»è¦ä»‹ç»eurekaçš„ä½¿ç”¨ï¼Œè¿˜æœ‰æœåŠ¡çš„æ³¨å†Œä¸å‘ç°ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯spring-cloud"><a href="#ä»€ä¹ˆæ˜¯spring-cloud" class="headerlink" title="ä»€ä¹ˆæ˜¯spring cloud"></a><font color="#8B475D">ä»€ä¹ˆæ˜¯spring cloud</font></h2><p><code>Spring Cloud</code>æ˜¯ä¸€ç³»åˆ—æ¡†æ¶çš„æœ‰åºé›†åˆã€‚å®ƒåˆ©ç”¨<code>Spring Boot</code>çš„å¼€å‘ä¾¿åˆ©æ€§å·§å¦™åœ°ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€è®¾æ–½çš„å¼€å‘ï¼Œå¦‚æœåŠ¡å‘ç°æ³¨å†Œã€é…ç½®ä¸­å¿ƒã€æ¶ˆæ¯æ€»çº¿ã€è´Ÿè½½å‡è¡¡ã€æ–­è·¯å™¨ã€æ•°æ®ç›‘æ§ç­‰ï¼Œéƒ½å¯ä»¥ç”¨<code>Spring Boot</code>çš„å¼€å‘é£æ ¼åšåˆ°ä¸€é”®å¯åŠ¨å’Œéƒ¨ç½²ã€‚<code>Spring</code>å¹¶æ²¡æœ‰é‡å¤åˆ¶é€ è½®å­ï¼Œå®ƒåªæ˜¯å°†ç›®å‰å„å®¶å…¬å¸å¼€å‘çš„æ¯”è¾ƒæˆç†Ÿã€ç»å¾—èµ·å®é™…è€ƒéªŒçš„æœåŠ¡æ¡†æ¶ç»„åˆèµ·æ¥ï¼Œé€šè¿‡<code>Spring Boot</code>é£æ ¼è¿›è¡Œå†å°è£…å±è”½æ‰äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œæœ€ç»ˆç»™å¼€å‘è€…ç•™å‡ºäº†ä¸€å¥—ç®€å•æ˜“æ‡‚ã€æ˜“éƒ¨ç½²å’Œæ˜“ç»´æŠ¤çš„åˆ†å¸ƒå¼ç³»ç»Ÿå¼€å‘å·¥å…·åŒ…ã€‚</p>
<p>å¾®æœåŠ¡æ˜¯å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ã€æ°´å¹³æ‰©å±•ã€ç‹¬ç«‹è®¿é—®ï¼ˆæˆ–è€…æœ‰ç‹¬ç«‹çš„æ•°æ®åº“ï¼‰çš„æœåŠ¡å•å…ƒï¼Œ<code>spring cloud</code>å°±æ˜¯è¿™äº›å¾®æœåŠ¡çš„å¤§ç®¡å®¶ï¼Œé‡‡ç”¨äº†å¾®æœåŠ¡è¿™ç§æ¶æ„ä¹‹åï¼Œé¡¹ç›®çš„æ•°é‡ä¼šéå¸¸å¤šï¼Œ<code>spring cloud</code>åšä¸ºå¤§ç®¡å®¶éœ€è¦ç®¡ç†å¥½è¿™äº›å¾®æœåŠ¡ï¼Œè‡ªç„¶éœ€è¦å¾ˆå¤šå°å¼Ÿæ¥å¸®å¿™ã€‚</p>
<p>è§£å†³äº†åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä¸€äº›é—®é¢˜:é…ç½®ç®¡ç†ã€æœåŠ¡æ³¨å†Œã€æœåŠ¡å‘ç°ã€æ–­è·¯å™¨ã€æ™ºèƒ½è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€æœåŠ¡é—´è°ƒç”¨ã€ä¸€æ¬¡æ€§ä»¤ç‰Œã€å…¨å±€é”ã€é¢†å¯¼é€‰ä¸¾ã€æ§åˆ¶æ€»çº¿ã€æ€ç»´å¯¼å›¾ã€åˆ†å¸ƒå¼ä¼šè¯ã€é›†ç¾¤çŠ¶æ€ã€åˆ†å¸ƒå¼æ¶ˆæ¯ã€‚ã€‚ã€‚</p>
<h2 id="spring-cloudå’Œspring-bootçš„å…³ç³»"><a href="#spring-cloudå’Œspring-bootçš„å…³ç³»" class="headerlink" title="spring cloudå’Œspring bootçš„å…³ç³»"></a><font color="#8B475D">spring cloudå’Œspring bootçš„å…³ç³»</font></h2><p><code>SpringBoot</code>æ˜¯æ„å»º<code>spring cloud</code>æ¶æ„çš„åŸºçŸ³ã€‚</p>
<h2 id="Eureka"><a href="#Eureka" class="headerlink" title="Eureka"></a><font color="#8B475D">Eureka</font></h2><h5 id="æœåŠ¡ä¸­å¿ƒ"><a href="#æœåŠ¡ä¸­å¿ƒ" class="headerlink" title="#æœåŠ¡ä¸­å¿ƒ"></a>#<font color="#367bdd">æœåŠ¡ä¸­å¿ƒ</font></h5><p>æœåŠ¡ä¸­å¿ƒåˆç§°æ³¨å†Œä¸­å¿ƒï¼Œç®¡ç†å„ç§æœåŠ¡åŠŸèƒ½åŒ…æ‹¬æœåŠ¡çš„æ³¨å†Œã€å‘ç°ã€ç†”æ–­ã€è´Ÿè½½ã€é™çº§ç­‰å„ç§åŠŸèƒ½ã€‚</p>
<p>æœ‰äº†æœåŠ¡ä¸­å¿ƒè°ƒç”¨å…³ç³»ä¼šæœ‰ä»€ä¹ˆå˜åŒ–ï¼Œç”»å‡ ä¸ªç®€å›¾æ¥å¸®å¿™ç†è§£.<br>æ¯”å¦‚æˆ‘ä»¬å‰é¢å¤©æ°”å¾®æœåŠ¡éœ€è¦è°ƒç”¨å¤©æ°”æ•°æ®æœåŠ¡çš„æ•°æ®æ¥å±•ç¤ºç»™å‰ç«¯</p>
<p>é¡¹ç›®Aè°ƒç”¨é¡¹ç›®B</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡--&gt;å¤©æ°”æ•°æ®API</span><br></pre></td></tr></table></figure>

<p>æœ‰äº†æœåŠ¡ä¸­å¿ƒä¹‹åï¼Œä»»ä½•ä¸€ä¸ªæœåŠ¡éƒ½ä¸èƒ½ç›´æ¥å»æ‰ç”¨ï¼Œéƒ½éœ€è¦é€šè¿‡æœåŠ¡ä¸­å¿ƒæ¥è°ƒç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡--&gt;æ³¨å†Œä¸­å¿ƒå†å»è®¿é—®å¤©æ°”æ•°æ®API</span><br></pre></td></tr></table></figure>

<h5 id="Eureka-1"><a href="#Eureka-1" class="headerlink" title="#Eureka"></a>#<font color="#367bdd">Eureka</font></h5><ul>
<li><code>Spring Cloud</code> å°è£…äº† <code>Netflix</code> å…¬å¸å¼€å‘çš„ <code>Eureka</code> æ¨¡å—æ¥å®ç°æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€‚</li>
<li><code>Eureka Server</code> ä½œä¸ºæœåŠ¡æ³¨å†ŒåŠŸèƒ½çš„æœåŠ¡å™¨ï¼Œå®ƒæ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒã€‚è€Œç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œä½¿ç”¨ <code>Eureka</code> çš„å®¢æˆ·ç«¯è¿æ¥åˆ° <code>Eureka Server</code>ï¼Œå¹¶ç»´æŒå¿ƒè·³è¿æ¥ã€‚</li>
<li>è¿™æ ·ç³»ç»Ÿçš„ç»´æŠ¤äººå‘˜å°±å¯ä»¥é€šè¿‡ <code>Eureka Server</code> æ¥ç›‘æ§ç³»ç»Ÿä¸­å„ä¸ªå¾®æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚</li>
<li><code>Spring Cloud</code> çš„ä¸€äº›å…¶ä»–æ¨¡å—ï¼ˆæ¯”å¦‚<code>Zuul</code>ï¼‰å°±å¯ä»¥é€šè¿‡ <code>Eureka Server</code> æ¥å‘ç°ç³»ç»Ÿä¸­çš„å…¶ä»–å¾®æœåŠ¡ï¼Œå¹¶æ‰§è¡Œç›¸å…³çš„é€»è¾‘ã€‚</li>
<li><code>Eureka</code>ç”±ä¸¤ä¸ªç»„ä»¶ç»„æˆï¼š<code>Eureka</code>æœåŠ¡å™¨å’Œ<code>Eureka</code>å®¢æˆ·ç«¯ã€‚<code>Eureka</code>æœåŠ¡å™¨ç”¨ä½œæœåŠ¡æ³¨å†ŒæœåŠ¡å™¨ã€‚<code>Eureka</code>å®¢æˆ·ç«¯æ˜¯ä¸€ä¸ªjavaå®¢æˆ·ç«¯ï¼Œç”¨æ¥ç®€åŒ–ä¸æœåŠ¡å™¨çš„äº¤äº’ã€ä½œä¸ºè½®è¯¢è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶æä¾›æœåŠ¡çš„æ•…éšœåˆ‡æ¢æ”¯æŒã€‚</li>
</ul>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/7-1.jpg" alt="image"></p>
<p>å…¶ä¸­æœ‰ä¸‰ä¸ªè§’è‰²ï¼š</p>
<ul>
<li><code>Eureka Server</code>ï¼šæä¾›æœåŠ¡æ³¨å†Œå’Œå‘ç°</li>
<li><code>Service Provider</code>æœåŠ¡æä¾›æ–¹ï¼Œå°†è‡ªèº«æœåŠ¡æ³¨å†Œåˆ°<code>Eureka</code>ï¼Œä»è€Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½å¤Ÿæ‰¾åˆ°</li>
<li><code>Service Consumer</code>ï¼šæœåŠ¡æ¶ˆè´¹æ–¹ï¼Œä»<code>Eureka</code>è·å–æ³¨å†ŒæœåŠ¡åˆ—è¡¨ï¼Œä»è€Œèƒ½å¤Ÿæ¶ˆè´¹æœåŠ¡</li>
</ul>
<h5 id="Eureka-Server"><a href="#Eureka-Server" class="headerlink" title="#Eureka Server"></a>#<font color="#367bdd">Eureka Server</font></h5><p>æ–°å»ºä¸€ä¸ªspringbooté¡¹ç›®ã€‚spring cloudå·²ç»å¸®æˆ‘å®ç°äº†æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘ä»¬åªéœ€è¦å¾ˆç®€å•çš„å‡ ä¸ªæ­¥éª¤å°±å¯ä»¥å®Œæˆã€‚</p>
<p>ä¸ºäº†å­¦ä¹ ä¸å‡ºå·®é”™æ¼”ç¤ºçš„springbootç‰ˆæœ¬å’Œspringcloudç‰ˆæœ¬å¹¶æ²¡æœ‰ç”¨æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå› ä¸ºspringBootå’Œspring cloudçš„ç‰ˆæœ¬å¯¹åº”å…³ç³»ï¼Œéœ€è¦é…å¥—ä½¿ç”¨ï¼Œæ‰ä¸ä¼šå‡ºç°å„ç§å¥‡æ€ªçš„é”™è¯¯ã€‚é¡¹ç›®ä¸­springbootçš„ç‰ˆæœ¬<code>&lt;version&gt;2.1.0.RELEASE&lt;/version&gt;</code>,springcloudç‰ˆæœ¬<code>&lt;version&gt;Finchley.RELEASE&lt;/version&gt;</code></p>
<p>1ã€pomä¸­æ·»åŠ ä¾èµ–</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependencyManagement&gt;</span><br><span class="line">        &lt;dependencies&gt;</span><br><span class="line">            &lt;dependency&gt;</span><br><span class="line">                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;Finchley.RELEASE&lt;/version&gt;</span><br><span class="line">                &lt;type&gt;pom&lt;/type&gt;</span><br><span class="line">                &lt;scope&gt;import&lt;/scope&gt;</span><br><span class="line">            &lt;/dependency&gt;</span><br><span class="line">        &lt;/dependencies&gt;</span><br><span class="line">&lt;/dependencyManagement&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">            &lt;exclusions&gt;</span><br><span class="line">                &lt;exclusion&gt;</span><br><span class="line">                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;</span><br><span class="line">                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;</span><br><span class="line">                &lt;/exclusion&gt;</span><br><span class="line">            &lt;/exclusions&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.18.4&lt;/version&gt;</span><br><span class="line">            &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;RELEASE&lt;/version&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br></pre></td></tr></table></figure>

<p>2ã€æ·»åŠ å¯åŠ¨ä»£ç ä¸­æ·»åŠ @EnableEurekaServeræ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MicroWeatherEurekaClientApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(MicroWeatherEurekaClientApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€é…ç½®æ–‡ä»¶</p>
<p>åœ¨é»˜è®¤è®¾ç½®ä¸‹ï¼Œè¯¥æœåŠ¡æ³¨å†Œä¸­å¿ƒä¹Ÿä¼šå°†è‡ªå·±ä½œä¸ºå®¢æˆ·ç«¯æ¥å°è¯•æ³¨å†Œå®ƒè‡ªå·±ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¦ç”¨å®ƒçš„å®¢æˆ·ç«¯æ³¨å†Œè¡Œä¸ºï¼Œåœ¨<code>application.yml</code>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">server.port=<span class="number">8761</span></span><br><span class="line">eureka.instance.hostname=localhost</span><br><span class="line">eureka.client.register-with-eureka=<span class="keyword">false</span></span><br><span class="line">eureka.client.fetch-registry=<span class="keyword">false</span></span><br><span class="line">eureka.client.service-url.defaultZone=http:<span class="comment">//localhost:8761/eureka</span></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨å·¥ç¨‹åï¼Œè®¿é—®ï¼š<a href="http://localhost:8761/" target="_blank" rel="noopener">http://localhost:8761/</a> ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„é¡µé¢ï¼Œå…¶ä¸­è¿˜æ²¡æœ‰å‘ç°ä»»ä½•æœåŠ¡</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher8-1.png" alt="image"></p>
<h5 id="Eureka-Client"><a href="#Eureka-Client" class="headerlink" title="#Eureka Client"></a>#<font color="#367bdd">Eureka Client</font></h5><p>åŸºæœ¬ä¸ä¸Šä¸€ä¸ªæ˜¯ç±»ä¼¼çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br></pre></td></tr></table></figure>

<p>ä¸»è¦çš„é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.application.name=msa-weather-city-eureka</span><br><span class="line">eureka.client.service-url.defaultZone=http:<span class="comment">//localhost:8761/eureka</span></span><br><span class="line">server.port=<span class="number">8084</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åŒæ—¶å¯åŠ¨<code>Eureka Server</code>å’Œ<code>Eureka Client</code>ä¸¤ä¸ªå·¥ç¨‹ã€‚åœ¨ç½‘ç«™ä¸­è¾“å…¥<code>localhost://8761</code>å°±å¯ä»¥çœ‹åˆ°æ³¨å†Œåˆ°<code>Eureka Server</code>çš„å®ä¾‹äº†ã€‚</p>
<h2 id="æœ¬é—¨å®æˆ˜"><a href="#æœ¬é—¨å®æˆ˜" class="headerlink" title="æœ¬é—¨å®æˆ˜"></a><font color="#8B475D">æœ¬é—¨å®æˆ˜</font></h2><p>å°†ä¹‹å‰çš„å››ä¸ªå¾®æœåŠ¡æ”¹é€ ä¸ºeurekaçš„å®¢æˆ·ç«¯ã€‚</p>
<p><code>mas-weather-collection-server</code></p>
<p><code>mas-weather-report-server</code></p>
<p><code>mas-weather-data-server</code></p>
<p><code>mas-weather-city-server</code></p>
<p>æ”¹ä¸ºï¼š</p>
<p><code>mas-weather-collection-eureka</code></p>
<p><code>mas-weather-report-eureka</code></p>
<p><code>mas-weather-data-eureka</code></p>
<p><code>mas-weather-city-eureka</code></p>
<p>æ”¹é€ è¿‡ç¨‹ååˆ†ç®€å•ï¼Œå°±æ˜¯å¼•å…¥ä¾èµ–ï¼Œä¿®æ”¹é…ç½®å³å¯ã€‚</p>
<p>åŒæ—¶å¯åŠ¨è¿™å››ä¸ªå¾®æœåŠ¡å®¢æˆ·ç«¯å’Œä¸€ä¸ª<code>eureka</code>æœåŠ¡ç«¯ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher8-2.png" alt="image"></p>
<p>ä¸‹é¢ï¼Œè¿™äº›å¾®æœåŠ¡ä¹‹é—´å¯ä»¥ç›¸äº’è®¿é—®äº†ã€‚</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/29/06-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-æ‹†åˆ†ç³»ç»Ÿ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/29/06-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-æ‹†åˆ†ç³»ç»Ÿ/" class="post-title-link" itemprop="url">06-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-æ‹†åˆ†ç³»ç»Ÿ</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-09-29 16:54:11" itemprop="dateCreated datePublished" datetime="2019-09-29T16:54:11+08:00">2019-09-29</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/springcloud/" itemprop="url" rel="index"><span itemprop="name">springcloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">1.4k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">1 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å‰é¢æˆ‘ä»¬è¯´åˆ°å…ˆæŠŠç³»ç»Ÿæ‹†åˆ†ä¸ºå››ä¸ªæœåŠ¡ï¼Œè¿˜æ²¡æœ‰è¿›è¡ŒæœåŠ¡æ²»ç†ï¼Œåªæ˜¯ä¸€ä¸ªç®€å•çš„ä¸šåŠ¡æ‹†åˆ†ï¼Œä¸ºä¸‹é¢åšå‡†å¤‡ã€‚</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher7-1.png" alt="image"></p>
<h2 id="å¤©æ°”æ•°æ®é‡‡é›†å¾®æœåŠ¡"><a href="#å¤©æ°”æ•°æ®é‡‡é›†å¾®æœåŠ¡" class="headerlink" title="å¤©æ°”æ•°æ®é‡‡é›†å¾®æœåŠ¡"></a><font color="#8B475D">å¤©æ°”æ•°æ®é‡‡é›†å¾®æœåŠ¡</font></h2><p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher7-2.png" alt="image"></p>
<p>è¿™ä¸ªå¾®æœåŠ¡ä¸“é—¨æä¾›æ•°æ®é‡‡é›†å’Œå®šæ—¶æ›´æ–°åŠŸèƒ½ï¼Œå°†æ•°æ®å­˜å‚¨åœ¨<code>redis</code>ä¸­ã€‚</p>
<p>è¯¥æœåŠ¡çš„æ ¸å¿ƒ<code>service</code>ä¸­çš„æ–¹æ³•æ˜¯ï¼š<code>syncDataByCityId</code>ï¼Œå°±æ˜¯æ ¹æ®<code>cityId</code>æ¥å°†æ•°æ®åŒæ­¥è¿›<code>redis</code>ã€‚</p>
<h2 id="å¤©æ°”æ•°æ®API"><a href="#å¤©æ°”æ•°æ®API" class="headerlink" title="å¤©æ°”æ•°æ®API"></a><font color="#8B475D">å¤©æ°”æ•°æ®API</font></h2>


<p>è¿™ä¸ªæœåŠ¡ä¸“é—¨æ¥æä¾›å¤©æ°”æ•°æ®çš„æŸ¥è¯¢åŠŸèƒ½ã€‚</p>
<p>å°†å‰ç«¯é¡µé¢ä»¥åŠå®šæ—¶ã€åŸå¸‚ç›¸å…³çš„ä»£ç å…¨éƒ¨åˆ é™¤ã€‚åªç•™ä¸‹ä¸¤ä¸ªAPIï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">WeatherResponse <span class="title">getDataByCityId</span><span class="params">(String cityId)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">WeatherResponse <span class="title">getDataByCityName</span><span class="params">(String cityName)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡"><a href="#å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡" class="headerlink" title="å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡"></a><font color="#8B475D">å¤©æ°”é¢„æŠ¥å¾®æœåŠ¡</font></h2>

<p>æœ¬æœåŠ¡çš„ä¸»è¦åŠŸèƒ½ä¸ºï¼šç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªå¤©æ°”é¢„æŠ¥çš„ç•Œé¢ã€‚</p>
<p>å°±å°†rediså’Œå®šæ—¶ä»»åŠ¡ç›¸å…³çš„éƒ½åˆ æ‰ã€‚æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªæ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Weather <span class="title">getDataByCityId</span><span class="params">(String cityId)</span></span>;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºå±•ç¤ºæ•°æ®éœ€è¦ç”¨åˆ°åŸå¸‚ä¿¡æ¯ï¼Œä½†æ˜¯æ­¤æ—¶è¿˜æ²¡æœ‰ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å»æ¨¡æ‹Ÿä¸€äº›æ•°æ®å»æ˜¾ç¤ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">getReportByCityId</span><span class="params">(@PathVariable(<span class="string">"cityId"</span>)</span> String cityId, Model model) <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       <span class="comment">//TODO æ”¹ä¸ºç”±åŸå¸‚æ•°æ®APIå¾®æœåŠ¡æ¥æä¾›æ•°æ®</span></span><br><span class="line">       List&lt;City&gt; cityList = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">try</span>&#123;</span><br><span class="line">           <span class="comment">//TODO æ”¹ä¸ºç”±åŸå¸‚æ•°æ®APIå¾®æœåŠ¡æ¥æä¾›æ•°æ®</span></span><br><span class="line">           cityList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">           City city = <span class="keyword">new</span> City();</span><br><span class="line">           city.setCityId(<span class="string">"101180101"</span>);</span><br><span class="line">           city.setProvince(<span class="string">"éƒ‘å·"</span>);</span><br><span class="line">           cityList.add(city);</span><br><span class="line">       &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">           log.error(<span class="string">"Exception"</span>,e);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//</span></span><br><span class="line">       model.addAttribute(<span class="string">"title"</span>,<span class="string">"ç³–ç³–çš„å¤©æ°”é¢„æŠ¥"</span>);</span><br><span class="line">       model.addAttribute(<span class="string">"cityId"</span>,cityId);</span><br><span class="line">       model.addAttribute(<span class="string">"cityList"</span>,cityList);</span><br><span class="line">       model.addAttribute(<span class="string">"report"</span>,weatherReportService.getDataByCityId(cityId));</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(<span class="string">"weather/report"</span>,<span class="string">"reportModel"</span>,model);</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŸå¸‚æ•°æ®API"><a href="#åŸå¸‚æ•°æ®API" class="headerlink" title="åŸå¸‚æ•°æ®API"></a><font color="#8B475D">åŸå¸‚æ•°æ®API</font></h2>

<p>æœ¬æœåŠ¡åªæä¾›åŸå¸‚åˆ—è¡¨æ•°æ®åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;City&gt; <span class="title">listCity</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>;</span><br></pre></td></tr></table></figure>

<p>å’Œä¸Šé¢ä¸€æ ·éœ€è¦å¡«å……ä¸€äº›å‡æ•°æ®ï¼Œæ–¹ä¾¿æµ‹è¯•ã€‚</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/27/05-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-æœåŠ¡æ‹†åˆ†/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/27/05-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-æœåŠ¡æ‹†åˆ†/" class="post-title-link" itemprop="url">05-å¤©æ°”é¢„æŠ¥ç³»ç»Ÿ-æœåŠ¡æ‹†åˆ†</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-09-27 16:54:11" itemprop="dateCreated datePublished" datetime="2019-09-27T16:54:11+08:00">2019-09-27</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/springcloud/" itemprop="url" rel="index"><span itemprop="name">springcloud</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">3.2k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">3 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è‡³æ­¤æˆ‘ä»¬å®Œæˆäº†å¤©æ°”é¢„æŠ¥åŸºæœ¬çš„ä¸€äº›åŠŸèƒ½ï¼Œå› ä¸ºè¿™ä¸ªè¯¾ç¨‹æ˜¯ä¸€ä¸ªå¾®æœåŠ¡çš„è¯¾ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬åé¢æ¥å­¦ä¹ å¦‚ä½•å°†æœåŠ¡æ‹†åˆ†å¼€æ¥ï¼Œåˆæ­¥è®¤è¯†ä¸‹ä»€ä¹ˆæ˜¯SOAæ¶æ„ï¼Œä»€ä¹ˆæ˜¯å¾®æœåŠ¡ã€‚</p>
<h2 id="å•ä½“æ¶æ„"><a href="#å•ä½“æ¶æ„" class="headerlink" title="å•ä½“æ¶æ„"></a><font color="#8B475D">å•ä½“æ¶æ„</font></h2><p>æˆ‘ä»¬ç†Ÿæ‚‰çš„MVCæ¶æ„å°±æ˜¯ä¸€ä¸ªå•ä½“æ¶æ„ã€‚</p>
<p>ç”¨æˆ·&lt;â€”&gt;è¡¨ç¤ºå±‚(<code>controller</code>)&lt;â€”&gt;ä¸šåŠ¡å±‚(<code>service</code>)&lt;â€”&gt;æ•°æ®è®¿é—®å±‚(<code>dao</code>)&lt;â€”&gt;æ•°æ®åº“</p>
<p>å•å—ç»“æ„çš„ä¼˜ç¼ºç‚¹ï¼š</p>
<table>
<thead>
<tr>
<th>ä¼˜ç‚¹</th>
<th>ç¼ºç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>åŠŸèƒ½åˆ’åˆ†æ¸…æ¥š</td>
<td>åŠŸèƒ½ä»ç„¶å¤ªå¤§</td>
</tr>
<tr>
<td>å±‚æ¬¡å…³ç³»è‰¯å¥½</td>
<td>æ”¯ä»˜å‘¨æœŸå˜é•¿</td>
</tr>
<tr>
<td>æ¯ä¸€å±‚ç‹¬ç«‹</td>
<td>å‡çº§é£é™©é«˜</td>
</tr>
<tr>
<td>éƒ¨ç½²ç®€å•</td>
<td>ç»´æŠ¤æˆæœ¬å¢åŠ </td>
</tr>
<tr>
<td>æŠ€æœ¯å•ä¸€</td>
<td>å¯ä¼¸ç¼©æ€§å·®</td>
</tr>
<tr>
<td>ç”¨äººæˆæœ¬ä½</td>
<td>ç›‘æ§å›°éš¾</td>
</tr>
</tbody></table>
<h2 id="å•ä½“æ¶æ„å¦‚ä½•è½¬åŒ–ä¸ºå¾®æœåŠ¡"><a href="#å•ä½“æ¶æ„å¦‚ä½•è½¬åŒ–ä¸ºå¾®æœåŠ¡" class="headerlink" title="å•ä½“æ¶æ„å¦‚ä½•è½¬åŒ–ä¸ºå¾®æœåŠ¡"></a><font color="#8B475D">å•ä½“æ¶æ„å¦‚ä½•è½¬åŒ–ä¸ºå¾®æœåŠ¡</font></h2><h5 id="ä»€ä¹ˆæ˜¯SOAï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯SOAï¼Ÿ" class="headerlink" title="#ä»€ä¹ˆæ˜¯SOAï¼Ÿ"></a>#<font color="#367bdd">ä»€ä¹ˆæ˜¯SOAï¼Ÿ</font></h5><blockquote>
<p><code>SOA</code>æ˜¯ä¸€ç§è®¾è®¡æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œè€ŒæœåŠ¡ä¹‹é—´é€šè¿‡é…åˆæœ€ç»ˆä¼šæä¾›ä¸€ç³»åˆ—åŠŸèƒ½ã€‚ä¸€ä¸ªæœåŠ¡é€šå¸¸ä»¥ç‹¬ç«‹çš„å½¢å¼å­˜åœ¨äºæ“ä½œç³»ç»Ÿè¿›ç¨‹ä¸­ã€‚æœåŠ¡ä¹‹é—´é€šè¿‡ç½‘ç»œè°ƒç”¨ï¼Œè€Œéé‡‡ç”¨è¿›ç¨‹å†…è°ƒç”¨çš„æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</p>
</blockquote>
<h5 id="SOAå’Œå¾®æœåŠ¡çš„ç†è§£"><a href="#SOAå’Œå¾®æœåŠ¡çš„ç†è§£" class="headerlink" title="#SOAå’Œå¾®æœåŠ¡çš„ç†è§£"></a>#<font color="#367bdd">SOAå’Œå¾®æœåŠ¡çš„ç†è§£</font></h5><p>æ€ä¹ˆå»ç†è§£é‚£ï¼Œæˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ªæ®µå­ï¼Œæ¯”è¾ƒå®¹æ˜“ç†è§£SOAå’Œå¾®æœåŠ¡ï¼š</p>
<blockquote>
<p>è¯è¯´1979å¹´ï¼Œåˆæ˜¯ä¸€ä¸ªæ˜¥å¤©ï¼Œè†ç”°ä¹¡ä¸‹çš„èµ¤è„šåŒ»ç”Ÿå´å¤§ç‰›è¢«æ”¹é©çš„æ˜¥é£å¹çš„å¿ƒæ½®æ¾æ¹ƒï¼Œè¯´å¹²å°±å¹²ï¼Œå´å¤§ç‰›è¶ç€å¤œè‰²æœ¦èƒ§æ‰¾å¤§é˜Ÿæ”¯ä¹¦æ±‡æŠ¥äº†æ€æƒ³ï¼Œç¬¬äºŒå¤©å°±æ‰¿åŒ…äº†æ‘å«ç”Ÿå®¤ï¼Œå¼€å¯äº†è‡ªå·±çš„åœ¨åŒ»ç–—åœˆçš„ä¼ å¥‡å†ç¨‹ã€‚ä¹¡æ‘è¯Šæ‰€å¤§å®¶éƒ½çŸ¥é“ï¼Œæ²¡ä»€ä¹ˆå¤æ‚çš„ä¸œä¸œï¼Œæˆ¿å­åªæœ‰ä¸€é—´ï¼Œä¸€ä¸ªå¤§æŸœå°ä¸­é—´éš”å¼€ï¼Œä¸€åŠæ˜¯è¯Šç–—å…¼å€™è¯ŠåŒºï¼Œä¸€åŠæ˜¯è¯æˆ¿ï¼Œçœ‹ç—…å°±ç›´æ¥æ‰¾åŒ»ç”Ÿï¼Œå¦‚æœå‰é¢æœ‰äººå°±è‡ªå·±æ‰¾ä¸ªä½å­åä¸‹ï¼Œæ’é˜Ÿç­‰ä¸€ä¼šï¼Œç§©åºå€’ä¹Ÿäº•ç„¶ï¼Œçœ‹å®Œç—…äº†åŒ»ç”Ÿç›´æ¥ç»™æŠ“è¯ï¼Œç„¶åä¸‹ä¸€ä¸ªç»§ç»­ï¼Œä¹Ÿä¸éœ€è¦æŠ¤å£«å’Œè¯å‰‚å¸ˆï¼Œå´å¤§ç‰›ä¸€ä¸ªäººå…¨éƒ¨åŒ…åŠã€‚</p>
</blockquote>
<blockquote>
<p>è¾›è¾›è‹¦è‹¦å¿™ç¢Œäº†åå¹´ï¼Œæ—¶é—´æ¥åˆ°äº†å…«ä¹å¹´ï¼Œåˆæ˜¯ä¸€ä¸ªæ˜¥å¤©ï¼Œæ˜”æ—¥çš„å•èº«æ±‰å´å¤§ç‰›å·²æˆä¸ºåé‡Œå…«ä¹¡çš„çŸ¥åäººç‰©ï¼Œåª³å¦‡å¨¶ä¸Šäº†ä¸è¯´ï¼Œå®¶é‡Œè¿˜å¢åŠ äº†ä¸€å¯¹åŒèƒèƒå„¿å­ï¼ŒäºŒå±‚çš„å°æ´‹æˆ¿ä¹Ÿç”šæ˜¯æ°”æ´¾ã€‚å¯æ˜¯ä¹Ÿæœ‰çƒ¦å¿ƒäº‹ï¼Œå°½ç®¡ä¹¡æ‘è¯Šæ‰€æ‰©å¤§åˆ°äº†ä¸¤é—´ï¼Œåª³å¦‡è¿˜å¶å°”èƒ½å»å¸®å¸®å¿™ï¼Œä½†æ˜¯åŒ»ç”Ÿè¿˜æ˜¯åªæœ‰è‡ªå·±ä¸€ä¸ªï¼Œå¤©å¤©ä»æ—©å¿™åˆ°æ™šæŒ£çš„éƒ½æ˜¯ä¸€ä»½é’±ï¼Œæƒ³å¤šæŒ£ç‚¹æ€ä¹ˆåŠï¼Ÿå´å¤§ç‰›æ—¥æ€å¤œæƒ³ï¼Œè¿˜çœŸç»™ä»–æƒ³å‡ºæ¥ä¸€æ‹›ï¼Œæ€ä¹ˆåŠï¼Œæ‰©å¤§è§„æ¨¡ï¼Œå¤šæ‹›å‡ ä¸ªåŒ»ç”Ÿä¸€èµ·å¹²ã€‚åŸæ¥å´å¤§ç‰›åªèƒ½æ²»å¤´ç–¼è„‘çƒ­å’Œè·Œæ‰“æŸä¼¤ï¼Œç°åœ¨æ–°æ‹›äº†ä¸€ä¸ªåŒ»ç§‘å¤§å­¦çš„æ¯•ä¸šç”Ÿåˆ˜å°æ˜ä¸“æ²»ç–‘éš¾æ‚ç—‡ï¼Œåˆä»é‚»æ‘è¯·æ¥äº†è€å¤§å¤«æé˜¿èŠ±ä¸“æ²»å¦‡ç§‘ç—…ï¼Œç°åœ¨ä¸€ä¸ªæ™®é€šçš„å°è¯Šæ‰€å°±å˜æˆäº†æœ‰ä¸‰ä¸ªç‹¬ç«‹ç§‘å®¤åŠ ä¸€ä¸ªå…¬å…±è¯æˆ¿ï¼ˆå´å¤§ç‰›åª³å¦‡è´Ÿè´£ï¼‰çš„å°åŒ»é™¢äº†ï¼Œå´å¤§ç‰›æ˜¯å¤–ç§‘ä¸»ä»»å…¼é™¢é•¿ï¼Œæ”¶å…¥é‚£å¯æ¯”ä¹‹å‰ç¿»äº†ä¸‰ç•ªã€‚äººé€¢å–œäº‹ç²¾ç¥çˆ½ï¼Œå¤§ç‰›é™¢é•¿è¯·å¿é‡Œçš„ä¹¦æ³•åå®¶ä¸ºæ–°åŒ»é™¢ä¹¦å†™äº†ç‰ŒåŒ¾â€“â€œåšçˆ±åŒ»é™¢â€ï¼ŒæŒ‘äº†ä¸€ä¸ªé»„é“å‰æ—¥æ­£å¼æŒ‚äº†ä¸Šå»ã€‚</p>
</blockquote>
<blockquote>
<p>ä¸€æ™ƒåå¹´è¿‡å»äº†ï¼Œåˆæ˜¯ä¸€ä¸ªæ˜¥å¤©ï¼Œå´å¤§ç‰›çš„åšçˆ±åŒ»é™¢å·²ç»å‘å±•åˆ°äº†å†…ç§‘å¤–ç§‘å¦‡ç§‘äº”å®˜ç§‘éª¨ç§‘ç”Ÿæ®–ç§‘å…­ä¸ªç§‘å®¤ï¼Œæ¯ä¸ªç§‘å®¤3åˆ°5ååŒ»ç”Ÿä¸ç­‰ï¼Œä¹Ÿè€—è´¹å·¨èµ„è´­è¿›äº†è¡€å¤œåŒ–éªŒBè¶…ç­‰å…ˆè¿›ä»ªå™¨ï¼Œå¤§ç‰›é™¢é•¿ä¹Ÿæ—©å·²è„±ç¦»äº†åŒ»ç–—ä¸€çº¿ï¼Œæˆä¸ºäº†ä¸“èŒçš„ç®¡ç†è€…ï¼Œä½†æ˜¯åŒ»é™¢çš„å¤§äº‹å°äº‹å¤§å®¶éƒ½æ‰¾ä»–ï¼Œå°±è¿™ä¸‰åå¤šå·å‘˜å·¥æçš„ä»–æ¯å¤©æ˜¯ç„¦å¤´çƒ‚é¢ï¼Œæƒ³å†æ‰©å¤§è§„æ¨¡å®åœ¨æ˜¯æœ‰å¿ƒæ— åŠ›äº†ã€‚è¦è¯´è¿˜æ˜¯å¤§å­¦ç”Ÿæœ‰æ°´å¹³ï¼Œè€éƒ¨ä¸‹åˆ˜å°æ˜ç»™å¤§ç‰›é™¢é•¿çŒ®äº†ä¸€è®¡ï¼ŒæŠŠå„ä¸ªç§‘å®¤ç‹¬ç«‹å‡ºå»ï¼Œè®©å„ä¸ªç§‘å®¤ä¸»ä»»è‡ªå·±ç®¡ç†ï¼Œå¤§ç‰›é™¢é•¿åªç®¡ç§‘å®¤ä¹‹é—´çš„åè°ƒå’ŒåŒ»é™¢å‘å±•çš„å¤§äº‹ï¼Œè¿™æ ·æ—¢èƒ½è°ƒåŠ¨åŸºå±‚çš„ç§¯ææ€§ï¼Œåˆèƒ½æŠŠå¤§ç‰›é™¢é•¿è§£æ”¾å‡ºæ¥æ‰©å¤§ç”Ÿäº§æŠ“å¤§äº‹è°‹å¤§äº‹ï¼Œå²‚ä¸å¦™å“‰ï¼Ÿå°±è¿™æ ·ï¼Œåšçˆ±åŒ»é™¢çš„æ–°ä¸€è½®æ”¹é©è½°è½°çƒˆçƒˆçš„å±•å¼€äº†ã€‚</p>
</blockquote>
<blockquote>
<p>åˆæ˜¯ä¸€ä¸ªåå¹´ï¼Œè¿˜æ˜¯åœ¨å“ªä¸ªæ˜¥å¤©ï¼Œå¤§ç‰›é™¢é•¿å·²æˆä¸ºæœ¬åœ°çŸ¥åçš„ä¼ä¸šå®¶ï¼Œåšçˆ±åŒ»é™¢ä¹Ÿå‘å±•åˆ°äº†äºŒåä¸‰ä¸ªç§‘å®¤æ•°ç™¾åå‘˜å·¥ï¼Œå‘å±•ä¸­ä¹Ÿå‡ºç°äº†æ–°é—®é¢˜ï¼Œç”±äºå„ä¸ªç§‘å®¤ç‹¬ç«‹æŒ‚å·ã€æ”¶è´¹ã€åŒ–éªŒï¼Œæœ‰çš„ç§‘å®¤æ•´å¤©å¿™å¿™ç¢Œç¢Œæ•ˆç›Šå¥½ï¼Œæœ‰çš„ç§‘å®¤å°±ç›¸å¯¹å¹³åº¸äº›ï¼Œè¿åˆ†åˆ°çš„å„ç§æ£€æŸ¥ä»ªå™¨éƒ½ä¸èƒ½æ»¡è´Ÿè·è¿è¡Œï¼Œæ•´ä¸ªåŒ»é™¢å…»äº†ä¸å°‘é—²äººã€‚è¿™æ—¶å€™å¤§ç‰›é™¢é•¿è§†é‡ä¹Ÿå¼€é˜”äº†ï¼Œè¯·æ¥äº†ç®¡ç†ä¸“å®¶è¿›è¡Œäº†é¡¶å±‚è®¾è®¡ï¼ŒæŠŠåŸæ¥åˆ†æ•£åˆ°å„ä¸ªç§‘å®¤çš„éæ ¸å¿ƒæœåŠ¡å…¨éƒ¨æ”¶å½’é›†ä¸­ç®¡ç†ï¼ŒæŠŠåŸæ¥äºŒåä¸‰ä¸ªæŒ‚å·çª—å£æ•´åˆä¸ºåä¸ªï¼ŒäºŒåä¸‰ä¸ªæ”¶è´¹çª—å£æ•´åˆä¸ºå…«ä¸ªï¼Œé›†ä¸­å¸ƒè®¾åœ¨ä¸€æ¥¼å¤§å…ä¸ºå…¨é™¢æœåŠ¡ï¼Œè¿˜æŠŠåˆ†æ•£åœ¨å„ä¸ªç§‘å®¤çš„æ£€æŸ¥ä»ªå™¨é›†ä¸­èµ·æ¥æˆç«‹ç‹¬ç«‹çš„æ£€éªŒç§‘ï¼Œä¹Ÿä¸ºå…¨é™¢æœåŠ¡ï¼Œè¿™æ ·äººäººæœ‰æ´»å¹²ï¼Œæ•´ä¸ªåŒ»é™¢çš„æœåŠ¡èƒ½åŠ›åˆä¸Šäº†ä¸€ä¸ªæ–°å°é˜¶ï¼Œè¿™è½®æ”¹é©ååšçˆ±åŒ»é™¢é€šè¿‡äº†å„çº§éƒ¨é—¨çš„é‰´å®šæˆä¸ºäº†è¿œè¿‘é©°åçš„ä¸‰ç”²åŒ»é™¢ï¼Œå´å¤§ç‰›ä¹Ÿæ¢èº«ä¸€å˜æˆä¸ºäº†åšçˆ±é›†å›¢çš„CEOå…¼è‘£äº‹é•¿ï¼Œä¸‹ä¸€æ­¥å°±å‡†å¤‡IPOä¸Šå¸‚äº†ã€‚</p>
</blockquote>
<blockquote>
<p>è¯´åˆ°è¿™é‡Œå¤§å®¶å¯èƒ½æœ‰ç‚¹ç³Šæ¶‚ï¼Œè¿™ä¸ªè·Ÿå¾®æœåŠ¡æœ‰å˜›å…³ç³»ï¼Ÿ<br>å¤§ç‰›è¯Šæ‰€çš„1.0é˜¶æ®µå°±ç›¸å½“äºè½¯ä»¶å¼€å‘çš„å•ä½“ç»“æ„ï¼Œä¸€ä¸ªç¨‹åºå‘˜æ‰“å¤©ä¸‹ï¼Œä»å¤´ç¼–åˆ°å°¾ï¼Œå¾ˆéš¾åšå¤§åšå¼ºã€‚<br>å¤§ç‰›è¯Šæ‰€çš„2.0é˜¶æ®µå°±ç›¸å½“äºè½¯ä»¶å¼€å‘çš„å‚ç›´ç»“æ„ï¼Œå„ç§‘å®¤æŒ‰ç…§ä¸šåŠ¡åˆ’åˆ†ï¼Œå¾ˆå®¹æ˜“æ¨ªå‘æ‰©å±•ã€‚<br>åšçˆ±åŒ»é™¢çš„1.0é˜¶æ®µå°±ç›¸å½“äºè½¯ä»¶å¼€å‘çš„SOAç»“æ„ï¼Œé™¤äº†è¯æˆ¿ï¼ˆæ•°æ®åº“ï¼‰å¤–å„ä¸ªæœåŠ¡ç‹¬ç«‹æä¾›ï¼ˆç§‘å®¤ä¸»ä»»è´Ÿè´£ï¼‰ï¼Œä½†éœ€è¦å¤§ç‰›é™¢é•¿ï¼ˆESBæ€»çº¿ï¼‰æ¥åè°ƒã€‚<br>åšçˆ±åŒ»é™¢çš„2.0é˜¶æ®µå°±ç›¸å½“äºè½¯ä»¶å¼€å‘çš„å¾®æœåŠ¡ç»“æ„ï¼Œå…¬å…±æœåŠ¡é™¢å†…å…±äº«ï¼Œç§‘å®¤ä¸»ä»»ç®¡ç†åŠŸèƒ½å¼±åŒ–ï¼ˆåªç®¡åŒ»ç”Ÿä¸šåŠ¡ï¼‰ï¼Œä¼˜ç‚¹æ˜¯æ‰©å®¹æ–¹ä¾¿ï¼Œå“ªä¸ªéƒ¨é—¨ç¼ºäººç›´æ¥åŠ ï¼Œä¸ç”¨çœ‹ä¸Šä¸‹æ¸¸ï¼Œèµ„æºåˆ©ç”¨ç‡é«˜ï¼Œäººå‘˜å’Œè®¾å¤‡æ•ˆç‡é«˜ã€‚<br>ä¸ºä»€ä¹ˆè¦å˜å‘¢ï¼Ÿå°è¯Šæ‰€æœ‰å°è¯Šæ‰€çš„æ´»æ³•ï¼Œå¤§åŒ»é™¢æœ‰å¤§åŒ»é™¢çš„éª„å‚²ã€‚æ— ä»–ï¼Œå¤©ä¸‹ç†™ç†™ï¼Œçš†ä¸ºåˆ©æ¥ï¼›å¤©ä¸‹æ”˜æ”˜ï¼Œçš†ä¸ºåˆ©å¾€ã€‚<br><a href="https://blog.csdn.net/HistoryCreator/article/details/89059711" target="_blank" rel="noopener">https://blog.csdn.net/HistoryCreator/article/details/89059711</a></p>
</blockquote>
<h5 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="#è®¾è®¡åŸåˆ™"></a>#<font color="#367bdd">è®¾è®¡åŸåˆ™</font></h5><ul>
<li>æ‹†åˆ†è¶³å¤Ÿå¾®ï¼šåˆ’åˆ†æ¯”è¾ƒç»†ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½å¤ªç»†ï¼Œå¢åŠ ç®¡ç†é—®é¢˜</li>
<li>è½»é‡çº§é€šä¿¡ï¼šrestï¼Œrpcç­‰æ–¹å¼åœ¨ç½‘ç»œä¸Šé€šä¿¡</li>
<li>å•ä¸€èŒè´£åŸåˆ™ï¼šé«˜å†…èšï¼Œä½è€¦åˆï¼Œç¡®å®šæœåŠ¡è¾¹ç•Œ</li>
</ul>
<h2 id="å¾®æœåŠ¡ç³»ç»Ÿè®¾è®¡"><a href="#å¾®æœåŠ¡ç³»ç»Ÿè®¾è®¡" class="headerlink" title="å¾®æœåŠ¡ç³»ç»Ÿè®¾è®¡"></a><font color="#8B475D">å¾®æœåŠ¡ç³»ç»Ÿè®¾è®¡</font></h2><p><strong>æœåŠ¡æ‹†åˆ†</strong>â€”-ã€‹<strong>æœåŠ¡æ³¨å†Œ</strong>â€”-ã€‹<strong>æœåŠ¡å‘ç°</strong>â€”-ã€‹<strong>æœåŠ¡æ¶ˆè´¹</strong>(è°ƒç”¨å¦å¤–ä¸€ä¸ªæœåŠ¡)â€”-ã€‹<strong>ç»Ÿä¸€å…¥å£</strong>(æœåŠ¡å¾ˆå¤šçš„æ—¶å€™éš¾ä»¥ç®¡ç†éœ€è¦æœ‰ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£)â€”-ã€‹<strong>é…ç½®ç®¡ç†</strong>(ç®¡ç†æ¯ä¸ªæœåŠ¡çš„é…ç½®ä¿¡æ¯)â€”-ã€‹<strong>ç†”æ–­æœºåˆ¶</strong>(ä¿æŠ¤ç³»ç»Ÿé¿å…å´©æºƒ)â€”-ã€‹<strong>è‡ªåŠ¨æ‰©å±•</strong>(æ ¹æ®è´Ÿè·è‡ªåŠ¨æ‰©å±•é›†ç¾¤)</p>
<h2 id="å¾®æœåŠ¡æ‹†åˆ†çš„æ„ä¹‰"><a href="#å¾®æœåŠ¡æ‹†åˆ†çš„æ„ä¹‰" class="headerlink" title="å¾®æœåŠ¡æ‹†åˆ†çš„æ„ä¹‰"></a><font color="#8B475D">å¾®æœåŠ¡æ‹†åˆ†çš„æ„ä¹‰</font></h2><ul>
<li>æ˜“äºå®ç°</li>
<li>æ˜“äºéƒ¨ç½²</li>
<li>æ˜“äºç»´æŠ¤</li>
<li>æ˜“äºæ›´æ–°</li>
</ul>
<p>æˆ‘ä»¬å¤©æ°”é¢„æŠ¥ç³»ç»Ÿå¯ä»¥å·®åˆ†ä¸ºï¼š</p>
<ul>
<li>å¤©æ°”æ•°æ®é‡‡é›†æœåŠ¡ï¼šæ•°æ®é‡‡é›†å’Œæ•°æ®å­˜å‚¨</li>
<li>å¤©æ°”é¢„æŠ¥æœåŠ¡ï¼šæ•°æ®å±•ç¤º</li>
<li>å¤©æ°”æ•°æ®APIï¼šæ•°æ®æŸ¥è¯¢</li>
<li>åŸå¸‚æ•°æ®APIï¼šæ•°æ®æŸ¥è¯¢</li>
</ul>
<h2 id="ç°æœ‰å¤©æ°”é¢„æŠ¥ä½“ç»Ÿçš„å¼Šç«¯"><a href="#ç°æœ‰å¤©æ°”é¢„æŠ¥ä½“ç»Ÿçš„å¼Šç«¯" class="headerlink" title="ç°æœ‰å¤©æ°”é¢„æŠ¥ä½“ç»Ÿçš„å¼Šç«¯"></a><font color="#8B475D">ç°æœ‰å¤©æ°”é¢„æŠ¥ä½“ç»Ÿçš„å¼Šç«¯</font></h2><h5 id="å¼Šç«¯"><a href="#å¼Šç«¯" class="headerlink" title="#å¼Šç«¯"></a>#<font color="#367bdd">å¼Šç«¯</font></h5><ul>
<li>å¤§è€Œå…¨ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½æºæ‚åœ¨ä¸€èµ·ï¼Œæ··æ‚äº†å¤ªå¤šçš„åŠŸèƒ½ï¼Œä¸æ»¡è¶³è½¯ä»¶è®¾è®¡çš„å•ä¸€èŒè´£åŸåˆ™ã€‚</li>
<li>éš¾ä»¥ç†è§£ï¼Œå½“æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œç³»ç»Ÿçš„ä»£ç é‡ä¼šè¶Šæ¥è¶Šå¯¹ï¼Œè®©æˆ‘ä»¬éš¾ä»¥ç†è§£ï¼Œä»è€Œå€’ç½®éš¾ä»¥ç»´æŠ¤ï¼Œä¹Ÿä¸åˆ©äºæ‰©å±•ã€‚</li>
</ul>
<h5 id="æ”¹é€ éœ€æ±‚"><a href="#æ”¹é€ éœ€æ±‚" class="headerlink" title="#æ”¹é€ éœ€æ±‚"></a>#<font color="#367bdd">æ”¹é€ éœ€æ±‚</font></h5><p>é‚£é—®é¢˜å‡ºæ¥äº†ï¼Œä¸ºäº†è§£å†³â€œå¤§è€Œå…¨â€çš„é—®é¢˜éœ€è¦æŠŠå½“å‰çš„ä¸šåŠ¡æ‹†åˆ†ç»†åŒ–ï¼ŒæœåŠ¡æ¨¡å—çš„ä¸šåŠ¡å°½é‡å•ä¸€ã€‚å¾®æœåŠ¡å¯ä»¥æ”¯æŒæ°´å¹³æ‰©å±•ï¼Œå¦‚æœæœ‰éœ€è¦è¿˜åº”èƒ½å®ç°å¾®æœåŠ¡é—´çš„ç®€å•è°ƒç”¨ã€‚</p>
<h2 id="é¡¹ç›®æ‹†åˆ†"><a href="#é¡¹ç›®æ‹†åˆ†" class="headerlink" title="é¡¹ç›®æ‹†åˆ†"></a><font color="#8B475D">é¡¹ç›®æ‹†åˆ†</font></h2><h5 id="ä¸åŒæ¨¡å—æ‹†åˆ†"><a href="#ä¸åŒæ¨¡å—æ‹†åˆ†" class="headerlink" title="#ä¸åŒæ¨¡å—æ‹†åˆ†"></a>#<font color="#367bdd">ä¸åŒæ¨¡å—æ‹†åˆ†</font></h5><p>ä¸Šé¢æˆ‘ä»¬è¯´åˆ°äº†å¦‚ä½•å°†é¡¹ç›®æ‹†åˆ†æˆä¸åŒçš„æ¨¡å—ï¼Œä¿æŒæ¯ä¸ªæ¨¡å—åŠŸèƒ½å°½é‡å•ä¸€ã€‚</p>
<ul>
<li>å¤©æ°”æ•°æ®é‡‡é›†æœåŠ¡ï¼šæ•°æ®é‡‡é›†å’Œæ•°æ®å­˜å‚¨</li>
<li>å¤©æ°”é¢„æŠ¥æœåŠ¡ï¼šæ•°æ®å±•ç¤º</li>
<li>å¤©æ°”æ•°æ®APIï¼šæ•°æ®æŸ¥è¯¢</li>
<li>åŸå¸‚æ•°æ®APIï¼šæ•°æ®æŸ¥è¯¢</li>
</ul>
<p>æˆ‘ä»¬å°†æ ¹æ®åŸæ¥é¡¹ç›®ä¸­ä¸åŒçš„ä¸šåŠ¡ä¸­çš„ç›¸äº’è°ƒç”¨æ¥è¿™æ ·æ‹†åˆ†ï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher6-1.png" alt="image"></p>
<h5 id="ä»£ç æ‹†åˆ†"><a href="#ä»£ç æ‹†åˆ†" class="headerlink" title="#ä»£ç æ‹†åˆ†"></a>#<font color="#367bdd">ä»£ç æ‹†åˆ†</font></h5><p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher6-2.png" alt="image"></p>
<h5 id="æ•°æ®æµå‘"><a href="#æ•°æ®æµå‘" class="headerlink" title="#æ•°æ®æµå‘"></a>#<font color="#367bdd">æ•°æ®æµå‘</font></h5><p>é¡¹ç›®ä¸­æˆ‘ä»¬æ•°æ®æœ‰ä¸¤å—æ¥æºï¼Œ1æ˜¯ç¬¬ä¸‰æ–¹çš„å¤©æ°”æ•°æ®æ ¹æ®ç¬¬ä¸‰æ–¹apiè·å–ï¼Œ2æ˜¯åŸå¸‚æ•°æ®åˆ—è¡¨æˆ‘ä»¬å¯ä»¥ç›´æ¥å‚¨å­˜åœ¨xmlæ–‡ä»¶ä¸­ï¼Œæ ¹æ®åŸå¸‚apiæ¥è·å–ã€‚</p>
<p>æˆ‘ä»¬ç¬¬ä¸‰æ–¹å¤©æ°”æ•°æ®æœåŠ¡æ ¹æ®åŸå¸‚åˆ—è¡¨æœåŠ¡æ¥é‡‡é›†æ•°æ®ï¼ŒåŒæ—¶åŸå¸‚åˆ—è¡¨æœåŠ¡ä¹Ÿå°†æä¾›ç»™å¤©æ°”é¢„æŠ¥æœåŠ¡ã€‚å…·ä½“æ•°æ®æµå‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://blog-picture-g.test.upcdn.net/weather/weaher6-3.png" alt="image"></p>
<h2 id="é€šä¿¡è®¾è®¡"><a href="#é€šä¿¡è®¾è®¡" class="headerlink" title="é€šä¿¡è®¾è®¡"></a><font color="#8B475D">é€šä¿¡è®¾è®¡</font></h2><ul>
<li>å¤©æ°”æ•°æ®æ¥å£ï¼š<ul>
<li>åŸå¸‚IDè°ƒç”¨æ–¹å¼ï¼š<code>Get/weather/cityId/{cityId}</code></li>
<li>å‚æ•°ï¼š<code>cityId</code>ä¸ºåŸå¸‚<code>ID</code></li>
<li>åŸå¸‚åç§°è°ƒç”¨æ–¹å¼ï¼š<code>Get/weather/cityName/{cityName}</code></li>
<li>å‚æ•°ï¼š<code>cityName</code>ä¸ºåŸå¸‚åç§°</li>
</ul>
</li>
<li>å¤©æ°”é¢„æŠ¥æ¥å£<ul>
<li>è°ƒç”¨æ–¹å¼ï¼š<code>Get/report/cityId/{cityId}</code></li>
<li>å‚æ•°ï¼š<code>cityId</code>ä¸ºåŸå¸‚<code>ID</code></li>
</ul>
</li>
<li>åŸå¸‚æ•°æ®æ¥å£<ul>
<li>è°ƒç”¨æ–¹å¼ï¼š<code>Get.citys</code></li>
<li>å‚æ•°ï¼šæ— ï¼ˆæ ¹æ®xmlåˆ—è¡¨è·å–ï¼‰</li>
</ul>
</li>
</ul>
<h2 id="å­˜å‚¨è®¾è®¡"><a href="#å­˜å‚¨è®¾è®¡" class="headerlink" title="å­˜å‚¨è®¾è®¡"></a><font color="#8B475D">å­˜å‚¨è®¾è®¡</font></h2><p>æˆ‘ä»¬è¿™ä¸ªé¡¹ç›®æ²¡æœ‰ç”¨åˆ°ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“ï¼Œå› ä¸ºæ•°æ®ä¸éœ€è¦é¢‘ç¹çš„ä¿å­˜å†å²è®°å½•æ‰€ä»¥é€‚ç”¨äº<code>NoSql</code>æ–¹å¼ï¼Œå°†æ•°æ®å­˜å‚¨åœ¨<code>redis</code>ä¸­å¯ä»¥æé«˜è®¿é—®é€Ÿåº¦å’Œç¬¬ä¸‰æ–¹æ¥å£çš„è°ƒç”¨ï¼Œç›¸å¯¹äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“æ›´æœ‰ä¼˜åŠ¿ã€‚</p>
<p>åŸå¸‚åˆ—è¡¨å­˜å‚¨åœ¨xmlæ–‡ä»¶ä¸­ï¼ŒåŸå¸‚åˆ—è¡¨åŸºæœ¬ä¸Šä¸å˜æ‰€ä»¥æ¯”è¾ƒé€‚åˆç›´æ¥å­˜å‚¨åœ¨é™æ€æ–‡ä»¶ä¸­ã€‚</p>

          
        
      
    </div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/26/32-è´£ä»»é“¾æ¨¡å¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/26/32-è´£ä»»é“¾æ¨¡å¼/" class="post-title-link" itemprop="url">32-è´£ä»»é“¾æ¨¡å¼</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-09-26 09:48:48" itemprop="dateCreated datePublished" datetime="2019-09-26T09:48:48+08:00">2019-09-26</time>
            </span>
          

          

          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">3.8k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">3 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>æœ¬æ–‡æˆ‘ä»¬æ¥äº†è§£ä¸‹è´£ä»»é“¾æ¨¡å¼ã€‚<br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/09/26/32-è´£ä»»é“¾æ¨¡å¼/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/09/25/31-ç­–ç•¥æ¨¡å¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gh">
      <meta itemprop="description" content="gratitude and love">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="To be or not to be?">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/25/31-ç­–ç•¥æ¨¡å¼/" class="post-title-link" itemprop="url">31-ç­–ç•¥æ¨¡å¼</a>
              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-09-25 16:11:48" itemprop="dateCreated datePublished" datetime="2019-09-25T16:11:48+08:00">2019-09-25</time>
            </span>
          

          

          

          
            
            
          

          
          

          

          

          <br>
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span>
              
              <span title="æœ¬æ–‡å­—æ•°">2.7k</span>
            </span>
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span>
              
              <span title="é˜…è¯»æ—¶é•¿">2 åˆ†é’Ÿ</span>
            </span>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>æœ¬æ–‡æˆ‘ä»¬æ¥äº†è§£ä¸‹ç­–ç•¥æ¨¡å¼ã€‚<br>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/09/25/31-ç­–ç•¥æ¨¡å¼/#more" rel="contents">
                é˜…è¯»å…¨æ–‡ &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </p></div>

    

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/19/"><i class="fa fa-angle-left" aria-label="ä¸Šä¸€é¡µ"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><span class="page-number current">20</span><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/21/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Gh">
            
              <p class="site-author-name" itemprop="name">Gh</p>
              <div class="site-description motion-element" itemprop="description">gratitude and love</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">329</span>
                    <span class="site-state-item-name">æ—¥å¿—</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">åˆ†ç±»</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">æ ‡ç­¾</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com" title="GitHub &rarr; https://github.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/yourname" title="Weibo &rarr; https://weibo.com/yourname" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://stackoverflow.com/yourname" title="StackOverflow &rarr; https://stackoverflow.com/yourname" rel="noopener" target="_blank"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.bilibili.com/" title="blibili &rarr; https://www.bilibili.com/" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>blibili</a>
                </span>
              
            </div>
          

          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-è¯´æ˜"></i>
                ğŸ“¢ğŸ“¢ğŸ“¢ï¼šç«™ç‚¹é™¤åˆ·é¢˜ç¬”è®°å’Œè¯¾ç¨‹ç¬”è®°ä»¥å¤–éƒ¨åˆ†æ–‡ç« å¹¶éåŸåˆ›ï¼Œåªä¸ºå­¦ä¹ å¤ä¹ ä½¿ç”¨ğŸ˜„ğŸ˜„ğŸ˜„
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="/">ğŸ”</a>
                  </li>
                
              </ul>
            </div>
          

          
        </div>
      </div>

      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Gh</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="ç«™ç‚¹æ€»å­—æ•°">861k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">13:03</span>
  
</div>








        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  





  
    
    
  
  <script color="0,0,0" opacity="0.5" zindex="-1" count="150" src="/lib/canvas-nest/canvas-nest.min.js"></script>









  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>



  

  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  


  
  
  

  

</body>
</html>
